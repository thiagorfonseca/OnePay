import{u as xe,r as n,j as e,f as pe,s as h}from"./index-HcuLVkXM.js";import{c as ge,b as q}from"./utils-C6qNh0Lg.js";import{u as Y}from"./useModalControls-BiWM_r1l.js";import{R as he}from"./RichTextEditor-C3h-x9cI.js";import{P as be}from"./plus-DDz1DOCh.js";import{S as fe}from"./search-C1xIXvIu.js";import{E as ye}from"./eye-DWJKAkmY.js";import{P as je}from"./pencil-MoagDD9-.js";import{T as ve}from"./trash-2-FGsD9cgR.js";const ee="user-avatars",P=350,F=[{value:"/",label:"Dash Financeiro"},{value:"/incomes",label:"Receitas"},{value:"/expenses",label:"Despesas"},{value:"/card-analysis",label:"Análise de cartão"},{value:"/reconciliation",label:"Conciliação bancária"},{value:"/assistant",label:"Assistente AI"},{value:"/profile",label:"Meu perfil"},{value:"/contents/courses",label:"Conteúdos • Cursos"},{value:"/contents/trainings",label:"Conteúdos • Treinamentos"},{value:"/accounts",label:"Contas bancárias"},{value:"/settings",label:"Minha Clínica"},{value:"/settings?section=geral",label:"Minha Clínica • Informações gerais"},{value:"/settings?section=categorias",label:"Minha Clínica • Categorias"},{value:"/settings?section=taxas",label:"Minha Clínica • Taxas"},{value:"/settings?section=clientes",label:"Minha Clínica • Clientes"},{value:"/settings?section=procedimentos",label:"Minha Clínica • Procedimentos"},{value:"/settings?section=profissionais",label:"Minha Clínica • Profissionais"},{value:"/settings?section=fornecedores",label:"Minha Clínica • Fornecedores"},{value:"/settings?section=usuarios",label:"Minha Clínica • Usuários"},{value:"/commercial/dashboard",label:"Comercial • Dash comercial"},{value:"/commercial/ranking",label:"Comercial • Ranking dos clientes"},{value:"/commercial/recurrence",label:"Comercial • Recorrência"},{value:"/commercial/geo",label:"Comercial • Geolocalização"},{value:"/pricing/calculator",label:"Precificação • Calculadora"},{value:"/pricing/procedures",label:"Precificação • Procedimentos"},{value:"/pricing/expenses",label:"Precificação • Gastos"},{value:"/pricing/focus-matrix",label:"Precificação • Matriz de Foco"},{value:"/hr/departments",label:"Minha Clínica • Departamentos"},{value:"/hr/collaborators",label:"Minha Clínica • Colaboradores"},{value:"/hr/feedback",label:"Recursos Humanos • Feedback"},{value:"/hr/meetings",label:"Recursos Humanos • Reuniões"},{value:"/app/agenda",label:"Recursos Humanos • Agenda"},{value:"/hr/archetypes",label:"Recursos Humanos • Arquétipos"},{value:"/hr/values",label:"Recursos Humanos • Teoria de valores"}],Ne=["CLT","PJ","MEI","Estágio","Temporário","Terceirizado","Outro"],_e=o=>o.normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9._-]+/g,"-").replace(/-+/g,"-").replace(/^-+|-+$/g,"")||`file-${crypto.randomUUID()}`,we=o=>new Promise((x,g)=>{const d=new Image,b=URL.createObjectURL(o);d.onload=()=>{URL.revokeObjectURL(b),x({width:d.width,height:d.height})},d.onerror=()=>{URL.revokeObjectURL(b),g(new Error("Imagem inválida."))},d.src=b}),Ce=async o=>{if(!o.type.startsWith("image/"))return"Envie um arquivo de imagem.";try{const{width:x,height:g}=await we(o);return x!==g?"A imagem precisa ser quadrada.":x>P||g>P?`A imagem deve ter no máximo ${P} x ${P}px.`:null}catch{return"Não foi possível ler a imagem."}},De=async(o,x)=>{const g=_e(x.name),d=`clinics/${o}/${crypto.randomUUID()}-${g}`,{error:b}=await h.storage.from(ee).upload(d,x,{upsert:!0});if(b)throw b;const{data:L}=h.storage.from(ee).getPublicUrl(d);return L.publicUrl},ae=(o,x)=>{const g=o.trim();if(g){const d=g.split(/\s+/).filter(Boolean);return d.length===1?d[0].slice(0,2).toUpperCase():`${d[0][0]||""}${d[d.length-1][0]||""}`.toUpperCase()}return x?x.slice(0,2).toUpperCase():"CL"},Le=()=>{const{effectiveClinicId:o,clinic:x,clinicUser:g}=xe(),[d,b]=n.useState([]),[L,$]=n.useState(!0),[C,te]=n.useState(""),[D,A]=n.useState(!1),[y,S]=n.useState(null),[B,H]=n.useState(!1),[K,f]=n.useState(null),[I,k]=n.useState(null),[V,T]=n.useState(null),[R,U]=n.useState(null),[j,M]=n.useState(null),[se,G]=n.useState(!1),[_,re]=n.useState({}),W=()=>{A(!1),S(null)},J=()=>{M(null)},le=Y({isOpen:D,onClose:W}),ie=Y({isOpen:!!j,onClose:J}),w=n.useRef(null),[s,m]=n.useState({name:"",email:"",birthDate:"",admissionDate:"",role:"user",pages:[],salary:"",functionTitle:"",jobTitle:"",contractType:"",jobDescription:"",archetype:"",avatarUrl:null}),X=ge("/auth/reset"),v=n.useMemo(()=>(x?.paginas_liberadas||[]).map(a=>a.trim()).filter(Boolean),[x?.paginas_liberadas]),N=n.useMemo(()=>{if(!v.length)return F;const a=v.includes("/settings");return F.filter(t=>t.value==="/settings?section=usuarios"?a||v.includes(t.value):v.includes(t.value)||v.some(r=>t.value.startsWith(r)))},[v]),ne=n.useMemo(()=>new Set(N.map(a=>a.value)),[N]),oe=n.useMemo(()=>Object.fromEntries(F.map(a=>[a.value,a.label])),[]),O=n.useMemo(()=>{if(!C.trim())return d;const a=C.toLowerCase();return d.filter(t=>[t.name,t.email,t.job_title,t.function_title].filter(Boolean).join(" ").toLowerCase().includes(a))},[d,C]),l=n.useMemo(()=>{if(!j)return null;const a=(j.email||"").trim().toLowerCase(),t=_[a];return{...j,archetype:t||j.archetype||""}},[j,_]),ce=async a=>{if(M(a),!!o){G(!0);try{const[t,r]=await Promise.all([h.from("clinic_users").select("id, clinic_id, name, email, role, paginas_liberadas, avatar_url, user_id, created_at").eq("clinic_id",o).eq("id",a.id).maybeSingle(),h.from("hr_collaborators").select("birth_date, admission_date, job_title, function_title, contract_type, salary, description, archetype").eq("clinic_id",o).eq("clinic_user_id",a.id).maybeSingle()]);if(t.error&&r.error)return;const p=t.data||a,c=r.data||{},i=(p.email||"").trim().toLowerCase(),u=_[i];M({...p,...c,archetype:u||c.archetype||""})}finally{G(!1)}}},z=async()=>{if(!o){b([]),$(!1);return}$(!0);const[a,t]=await Promise.all([h.from("clinic_users").select(`
          id,
          clinic_id,
          name,
          email,
          role,
          paginas_liberadas,
          avatar_url,
          user_id,
          created_at,
          hr_collaborators (
            birth_date,
            admission_date,
            job_title,
            function_title,
            contract_type,
            salary,
            description,
            archetype
          )
        `).eq("clinic_id",o).order("created_at",{ascending:!1}),h.from("archetype_respondents").select("email, top_profile, created_at").eq("clinic_id",o).not("email","is",null)]);let r={};if(!t.error){const p={};(t.data||[]).forEach(c=>{const i=(c.email||"").trim().toLowerCase();if(!i)return;const u=p[i];(!u||new Date(c.created_at)>new Date(u.createdAt))&&(p[i]={profile:c.top_profile,createdAt:c.created_at})}),r=Object.fromEntries(Object.entries(p).map(([c,i])=>[c,i.profile])),re(r)}if(!a.error&&a.data){const p=a.data.map(c=>{const i=(c.email||"").trim().toLowerCase(),u=r[i],E=c.hr_collaborators?.[0]||{};return{...c,...E,archetype:u||E.archetype||""}});b(p)}$(!1)};n.useEffect(()=>{z()},[o]),n.useEffect(()=>{if(!D)return;const a=s.email.trim().toLowerCase(),t=a?_[a]:"";t&&m(r=>r.archetype===t?r:{...r,archetype:t})},[D,s.email,_]);const de=()=>{S(null),f(null),k(null),T(null),U(null),m({name:"",email:"",birthDate:"",admissionDate:"",role:"user",pages:[],salary:"",functionTitle:"",jobTitle:"",contractType:"",jobDescription:"",archetype:"",avatarUrl:null}),A(!0)},Z=a=>{S(a.id),f(null),k(null),T(null),U(null),m({name:a.name||"",email:a.email||"",birthDate:a.birth_date||"",admissionDate:a.admission_date||"",role:a.role||"user",pages:a.paginas_liberadas||[],salary:a.salary!=null?String(a.salary):"",functionTitle:a.function_title||"",jobTitle:a.job_title||"",contractType:a.contract_type||"",jobDescription:a.description||"",archetype:a.archetype||"",avatarUrl:a.avatar_url||null}),A(!0)},me=async a=>{const t=await Ce(a);if(t){U(t),k(null),T(null);return}U(null),k(a),T(URL.createObjectURL(a))},ue=async a=>{if(a.preventDefault(),!o){f("Nenhuma clínica ativa encontrada.");return}if(!s.name.trim()||!s.email.trim()){f("Nome e e-mail são obrigatórios.");return}if(R&&I){f(R);return}H(!0),f(null);try{let t=s.avatarUrl;I&&(t=await De(o,I));const r=N.length>0?s.pages.filter(i=>ne.has(i)):s.pages,p={clinic_id:o,name:s.name.trim(),email:s.email.trim().toLowerCase(),role:s.role,paginas_liberadas:r,avatar_url:t||null};let c=y;if(y){const{error:i}=await h.from("clinic_users").update(p).eq("id",y);if(i)throw i}else{const{data:i,error:u}=await h.from("clinic_users").insert(p).select("id").maybeSingle();if(u)throw u;c=i?.id||null}if(c){const i={clinic_id:o,clinic_user_id:c,birth_date:s.birthDate||null,admission_date:s.admissionDate||null,salary:s.salary?Number(s.salary):null,function_title:s.functionTitle||null,job_title:s.jobTitle||null,contract_type:s.contractType||null,description:s.jobDescription||null,archetype:s.archetype||null},{error:u}=await h.from("hr_collaborators").upsert(i,{onConflict:"clinic_user_id"});if(u)throw u}if(!y&&X){const i=p.email,{error:u}=await h.auth.signInWithOtp({email:i,options:{shouldCreateUser:!0,emailRedirectTo:X}});u&&f(`Usuário criado, mas não foi possível enviar o e-mail: ${u.message}`)}A(!1),S(null),z()}catch(t){f(t?.message||"Erro ao salvar colaborador.")}finally{H(!1)}},Q=a=>a.user_id?"Realizou":"Pendente";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-brand-600 font-semibold",children:"Recursos Humanos"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Colaboradores"})]}),e.jsxs("button",{type:"button",onClick:de,className:"px-4 py-2 rounded-lg bg-brand-600 text-white text-sm hover:bg-brand-700 flex items-center gap-2",children:[e.jsx(be,{size:16})," Novo colaborador"]})]}),e.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl p-5 flex flex-wrap gap-3 items-center justify-between",children:[e.jsxs("div",{className:"relative flex-1 min-w-[240px]",children:[e.jsx(fe,{size:16,className:"absolute left-3 top-3 text-gray-400"}),e.jsx("input",{value:C,onChange:a=>te(a.target.value),placeholder:"Buscar por colaboradores",className:"w-full pl-9 pr-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-brand-500 outline-none"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(pe,{size:16}),O.length," registros"]})]}),e.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 grid grid-cols-[70px_1.2fr_1.2fr_140px_140px_160px_150px_120px] gap-4 text-xs uppercase text-gray-400 tracking-wider",children:[e.jsx("span",{children:"ID"}),e.jsx("span",{children:"Nome"}),e.jsx("span",{children:"Email"}),e.jsx("span",{children:"Admissão"}),e.jsx("span",{children:"Cargo"}),e.jsx("span",{children:"Arquétipos"}),e.jsx("span",{children:"Primeiro acesso"}),e.jsx("span",{})]}),L?e.jsx("div",{className:"px-6 py-12 text-center text-sm text-gray-500",children:"Carregando colaboradores..."}):e.jsxs("div",{className:"p-4 space-y-3",children:[O.map((a,t)=>{const r=g?.id===a.id,p=r?"bg-slate-900 border-slate-800 text-white":"bg-white border-gray-100",c=r?"text-slate-200":"text-gray-600",i=r?"text-slate-300":"text-gray-500",u=a.user_id?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700";return e.jsxs("div",{className:`grid grid-cols-[70px_1.2fr_1.2fr_140px_140px_160px_150px_120px] gap-4 items-center rounded-2xl border px-4 py-3 ${p}`,children:[e.jsx("span",{className:`text-sm ${i}`,children:String(t+1).padStart(2,"0")}),e.jsxs("div",{className:"flex items-center gap-3",children:[a.avatar_url?e.jsx("img",{src:a.avatar_url,alt:a.name,className:"w-9 h-9 rounded-full object-cover"}):e.jsx("div",{className:"w-9 h-9 rounded-full bg-brand-50 text-brand-600 flex items-center justify-center text-xs font-semibold",children:ae(a.name||"",a.email||"")}),e.jsx("span",{className:`text-sm font-semibold ${r?"text-white":"text-gray-900"}`,children:a.name})]}),e.jsx("span",{className:`text-sm ${c} break-all`,children:a.email}),e.jsx("span",{className:`text-sm ${c}`,children:a.admission_date?q(a.admission_date):"-"}),e.jsx("span",{className:`text-sm ${c}`,children:a.job_title||"Não informado"}),e.jsx("span",{className:`text-sm ${i}`,children:a.archetype||"Não respondido"}),e.jsx("span",{className:`text-xs font-semibold px-3 py-1 rounded-full w-fit ${u}`,children:Q(a)}),e.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[e.jsx("button",{type:"button",onClick:()=>ce(a),className:`w-8 h-8 rounded-full flex items-center justify-center border ${r?"border-slate-600 text-white":"border-gray-200 text-gray-500"}`,title:"Visualizar",children:e.jsx(ye,{size:14})}),e.jsx("button",{type:"button",onClick:()=>Z(a),className:`w-8 h-8 rounded-full flex items-center justify-center border ${r?"border-slate-600 text-white":"border-brand-100 text-brand-600"}`,title:"Editar",children:e.jsx(je,{size:14})}),e.jsx("button",{type:"button",onClick:async()=>{if(!confirm("Excluir colaborador?"))return;const{error:E}=await h.from("clinic_users").delete().eq("id",a.id);E||z()},className:`w-8 h-8 rounded-full flex items-center justify-center border ${r?"border-rose-400 text-rose-200":"border-rose-100 text-rose-600"}`,title:"Apagar",children:e.jsx(ve,{size:14})})]})]},a.id)}),O.length===0&&e.jsx("div",{className:"px-6 py-12 text-center text-sm text-gray-400",children:"Nenhum colaborador encontrado."})]})]}),D&&e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-start justify-center z-50 overflow-y-auto py-8",onClick:le.onBackdropClick,children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-4xl p-6 space-y-4 max-h-[calc(100vh-4rem)] overflow-y-auto",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:y?"Editar colaborador":"Adicionar colaborador"}),e.jsx("button",{type:"button",onClick:W,className:"w-9 h-9 rounded-full bg-gray-100 flex items-center justify-center text-gray-500",children:"✕"})]}),e.jsxs("form",{onSubmit:ue,className:"grid grid-cols-1 md:grid-cols-[220px_1fr] gap-6",children:[e.jsxs("div",{className:"space-y-4 flex flex-col",children:[e.jsx("div",{className:"w-full rounded-2xl border border-dashed border-gray-300 bg-gray-50 flex items-center justify-center h-40",children:V||s.avatarUrl?e.jsx("img",{src:V||s.avatarUrl||"",alt:"Avatar",className:"w-20 h-20 rounded-full object-cover"}):e.jsx("span",{className:"text-sm text-gray-400",children:"Upload de imagem"})}),e.jsxs("label",{className:"px-4 py-2 border border-gray-200 rounded-lg text-sm text-gray-700 flex items-center justify-center gap-2 cursor-pointer",children:["+ Adicionar foto",e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:async a=>{const t=a.target.files?.[0];t&&await me(t),a.currentTarget.value=""}})]}),R&&e.jsx("p",{className:"text-xs text-red-600",children:R})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome completo"}),e.jsx("input",{value:s.name,onChange:a=>m(t=>({...t,name:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nascimento"}),e.jsx("input",{type:"date",value:s.birthDate,onChange:a=>m(t=>({...t,birthDate:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Visualizações menu"}),N.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"Defina páginas liberadas para a clínica."}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("details",{ref:w,className:"relative",children:[e.jsx("summary",{className:"list-none cursor-pointer w-full px-3 py-2 border border-gray-300 rounded-lg bg-white text-sm text-gray-700",children:"Selecione"}),e.jsxs("div",{className:"absolute z-20 mt-2 w-full max-h-56 overflow-auto border border-gray-200 rounded-lg bg-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-gray-100 text-xs text-gray-500",children:[e.jsx("button",{type:"button",onClick:()=>{m(a=>({...a,pages:N.map(t=>t.value)})),w.current&&w.current.removeAttribute("open")},className:"text-brand-600 hover:text-brand-700",children:"Selecionar todos"}),e.jsx("button",{type:"button",onClick:()=>m(a=>({...a,pages:[]})),className:"text-gray-500 hover:text-gray-700",children:"Limpar"})]}),N.map(a=>e.jsx("button",{type:"button",onClick:()=>{s.pages.includes(a.value)||(m(t=>({...t,pages:[...t.pages,a.value]})),w.current&&w.current.removeAttribute("open"))},className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50",children:a.label},a.value))]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.pages.map(a=>e.jsxs("button",{type:"button",onClick:()=>m(t=>({...t,pages:t.pages.filter(r=>r!==a)})),className:"px-3 py-1 rounded-full border border-gray-200 text-xs text-gray-600",children:[oe[a]||a," ✕"]},a))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Permissão"}),e.jsxs("select",{value:s.role,onChange:a=>m(t=>({...t,role:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-white",children:[e.jsx("option",{value:"user",children:"Usuário"}),e.jsx("option",{value:"admin",children:"Admin"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Salário"}),e.jsx("input",{value:s.salary,onChange:a=>m(t=>({...t,salary:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"R$"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Função"}),e.jsx("input",{value:s.functionTitle,onChange:a=>m(t=>({...t,functionTitle:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Digite aqui"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cargo"}),e.jsx("input",{value:s.jobTitle,onChange:a=>m(t=>({...t,jobTitle:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Digite aqui"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de admissão"}),e.jsx("input",{type:"date",value:s.admissionDate,onChange:a=>m(t=>({...t,admissionDate:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de contrato"}),e.jsxs("select",{value:s.contractType,onChange:a=>m(t=>({...t,contractType:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-white",children:[e.jsx("option",{value:"",children:"Selecione"}),Ne.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"E-mail *"}),e.jsx("input",{type:"email",value:s.email,onChange:a=>m(t=>({...t,email:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"example@email.com"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Arquétipo"}),e.jsx("input",{value:s.archetype,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600",placeholder:"Aguardando resposta"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrição de função"}),e.jsx(he,{value:s.jobDescription,onChange:a=>m(t=>({...t,jobDescription:a})),placeholder:"Descreva",minHeight:180})]}),K&&e.jsx("div",{className:"p-3 bg-rose-50 text-rose-600 text-sm rounded-lg",children:K}),e.jsx("div",{className:"sticky bottom-0 bg-white pt-2",children:e.jsx("button",{type:"submit",disabled:B,className:"w-full px-4 py-2 bg-brand-600 text-white rounded-lg hover:bg-brand-700 disabled:opacity-50",children:B?"Salvando...":y?"Salvar":"Criar"})})]})]})]})}),l&&e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-start justify-center z-50 overflow-y-auto py-8",onClick:ie.onBackdropClick,children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-3xl p-6 space-y-4 max-h-[calc(100vh-4rem)] overflow-y-auto",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Visualizar colaborador"}),e.jsx("button",{type:"button",onClick:J,className:"w-9 h-9 rounded-full bg-gray-100 flex items-center justify-center text-gray-500",children:"✕"})]}),se?e.jsx("div",{className:"text-sm text-gray-500 py-8 text-center",children:"Carregando dados do colaborador..."}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[120px_1fr] gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[l.avatar_url?e.jsx("img",{src:l.avatar_url,alt:l.name,className:"w-20 h-20 rounded-full object-cover"}):e.jsx("div",{className:"w-20 h-20 rounded-full bg-brand-50 text-brand-600 flex items-center justify-center text-lg font-semibold",children:ae(l.name||"",l.email||"")}),e.jsx("span",{className:`text-xs font-semibold px-3 py-1 rounded-full ${l.user_id?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"}`,children:Q(l)})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Nome"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:l.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"E-mail"}),e.jsx("p",{className:"text-sm text-gray-700 break-all",children:l.email})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Admissão"}),e.jsx("p",{className:"text-sm text-gray-700",children:l.admission_date?q(l.admission_date):"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Nascimento"}),e.jsx("p",{className:"text-sm text-gray-700",children:l.birth_date?q(l.birth_date):"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Contrato"}),e.jsx("p",{className:"text-sm text-gray-700",children:l.contract_type||"Não informado"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Cargo"}),e.jsx("p",{className:"text-sm text-gray-700",children:l.job_title||"Não informado"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Função"}),e.jsx("p",{className:"text-sm text-gray-700",children:l.function_title||"Não informado"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Salário"}),e.jsx("p",{className:"text-sm text-gray-700",children:l.salary?`R$ ${Number(l.salary).toFixed(2)}`:"Não informado"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Arquétipo"}),e.jsx("p",{className:"text-sm text-gray-700",children:l.archetype||"Não respondido"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Descrição"}),l.description?e.jsx("div",{className:"text-sm text-gray-700 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:l.description}}):e.jsx("p",{className:"text-sm text-gray-700",children:"Sem descrição"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",onClick:()=>{const a=l;M(null),Z(a)},className:"px-4 py-2 bg-brand-600 text-white rounded-lg text-sm",children:"Editar colaborador"})})]})})]})};export{Le as default};
