import{j as o,s as l}from"./index-HcuLVkXM.js";const m=({title:r,subtitle:t,actions:e})=>o.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:r}),t?o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t}):null]}),e?o.jsx("div",{className:"flex items-center gap-2",children:e}):null]}),n=l,f=async r=>{const{data:t,error:e}=await n.from("inventory_items").select("*").eq("clinic_id",r).order("name",{ascending:!0});if(e)throw e;return t||[]},_=async r=>{const{data:t,error:e}=await n.from("inventory_items").insert(r).select("*").single();if(e)throw e;return t},y=async(r,t)=>{const{data:e,error:s}=await n.from("inventory_items").update(t).eq("id",r).select("*").single();if(s)throw s;return e},p=async r=>{const{error:t}=await n.from("inventory_items").delete().eq("id",r);if(t)throw t},w=async r=>{const{data:t,error:e}=await n.from("suppliers").select("*").eq("clinic_id",r).order("nome",{ascending:!0});if(e)throw e;return t||[]},h=async r=>{const{data:t,error:e}=await n.from("inventory_item_barcodes").select("item_id, barcode").eq("clinic_id",r);if(e)throw e;return t||[]},v=async r=>{const{data:t,error:e}=await n.from("suppliers").upsert(r).select("*").single();if(e)throw e;return t},g=async r=>{const{error:t}=await n.from("suppliers").delete().eq("id",r);if(t)throw t},q=async r=>{const{data:t,error:e}=await n.from("inventory_item_stock").select("*").eq("clinic_id",r);if(e)throw e;return t||[]},x=async r=>{const{data:t,error:e}=await n.from("inventory_batch_stock").select("*").eq("clinic_id",r);if(e)throw e;return t||[]},I=async r=>{const{data:t,error:e}=await n.from("inventory_open_container_status").select("*").eq("clinic_id",r);if(e)throw e;return t||[]},b=async(r,t=200)=>{const{data:e,error:s}=await n.from("inventory_movements").select("*").eq("clinic_id",r).order("created_at",{ascending:!1}).limit(t);if(s)throw s;return e||[]},j=async r=>{const{data:t,error:e}=await n.from("inventory_counts").select("*, inventory_count_lines(*)").eq("clinic_id",r).order("created_at",{ascending:!1});if(e)throw e;return t||[]},S=async r=>{const{data:t,error:e}=await n.from("inventory_counts").insert(r).select("*").single();if(e)throw e;return t},C=async r=>{const{data:t,error:e}=await n.from("inventory_count_lines").insert(r).select("*");if(e)throw e;return t||[]},k=async r=>{const{data:t,error:e}=await n.from("inventory_counts").update({status:"submitted"}).eq("id",r).select("*").single();if(e)throw e;return t},B=async r=>{const{data:t,error:e}=await n.rpc("apply_inventory_count",{p_count_id:r});if(e)throw e;return t},N=async r=>{const{data:t,error:e}=await n.from("inventory_movements").insert(r).select("*").single();if(e)throw e;return t},$=async r=>{const{data:t,error:e}=await n.from("inventory_open_containers").insert(r).select("*").single();if(e)throw e;return t},z=async r=>{const{data:t,error:e}=await n.rpc("create_purchase_invoice",{p_payload:r});if(e)throw e;return t},A=async(r,t=50)=>{const{data:e,error:s}=await n.from("purchase_invoices").select("*, suppliers (nome), purchase_invoice_items(*)").eq("clinic_id",r).order("created_at",{ascending:!1}).limit(t);if(s)throw s;return e||[]},E=async(r,t,e)=>{const s=`clinics/${r}/invoices/${t}/${Date.now()}-${e.name}`,{error:a}=await l.storage.from("inventory-docs").upload(s,e,{upsert:!1});if(a)throw a;const{data:c,error:i}=await n.from("purchase_invoice_files").insert({clinic_id:r,invoice_id:t,file_path:s,file_type:e.type,file_size:e.size}).select("*").single();if(i)throw i;return c},R=async r=>{const{data:t,error:e}=await n.from("alerts").select("*").eq("clinic_id",r).order("created_at",{ascending:!1});if(e)throw e;return t||[]},M=async(r,t)=>{const{data:e,error:s}=await n.from("alerts").update({status:t}).eq("id",r).select("*").single();if(s)throw s;return e},P=async r=>{const{data:t,error:e}=await n.from("ai_insights").select("*").eq("clinic_id",r).order("created_at",{ascending:!1});if(e)throw e;return t||[]},D=async r=>{const{data:t,error:e}=await n.from("procedure_recipes").select("*, procedure_recipe_lines(*)").eq("clinic_id",r).order("created_at",{ascending:!1});if(e)throw e;return t||[]},F=async(r,t)=>{const{data:e,error:s}=await n.from("procedure_recipes").insert(r).select("*").single();if(s)throw s;const a=e;if(t.length){const c=t.map(d=>({...d,recipe_id:a.id,clinic_id:a.clinic_id})),{error:i}=await n.from("procedure_recipe_lines").insert(c);if(i)throw i}return a},H=async(r,t)=>{const{data:e,error:s}=await n.from("inventory_item_barcodes").select("*, inventory_items(*)").eq("clinic_id",r).eq("barcode",t).maybeSingle();if(s)throw s;return e};export{S as A,C as B,m as S,f as a,q as b,x as c,b as d,p as e,w as f,_ as g,g as h,v as i,A as j,h as k,R as l,z as m,E as n,I as o,$ as p,N as q,M as r,H as s,P as t,y as u,D as v,F as w,k as x,B as y,j as z};
