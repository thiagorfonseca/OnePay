import{a as N,b as f,r as l,j as e,L as v,s as u}from"./index-V1BrPv90.js";const _=()=>{const[m,i]=N(),b=f(),s=m.get("type")==="training"?"training":"course",[g,d]=l.useState(!0),[o,x]=l.useState([]),[p,c]=l.useState(!1),[a,n]=l.useState({title:"",description:"",thumbnail_url:""}),h=l.useMemo(()=>s==="course"?"Cursos":"Treinamentos",[s]),y=async()=>{d(!0);const{data:t}=await u.from("content_items").select("id, type, title, description, thumbnail_url, published, created_at").eq("type",s).order("created_at",{ascending:!1});x(t||[]),d(!1)};l.useEffect(()=>{y()},[s]);const j=async()=>{if(!a.title.trim())return;c(!0);const{data:t,error:r}=await u.from("content_items").insert({type:s,title:a.title.trim(),description:a.description||null,thumbnail_url:a.thumbnail_url||null,published:!1}).select("id").single();c(!1),!r&&t?.id&&(n({title:"",description:"",thumbnail_url:""}),b(`/admin/content/${t.id}?tab=about&type=${s}`))};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Conteúdos"}),e.jsx("p",{className:"text-gray-500",children:"Gerencie cursos e treinamentos publicados."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>i({type:"course"}),className:`px-3 py-2 text-sm rounded-lg border ${s==="course"?"bg-brand-600 text-white border-brand-600":"bg-white text-gray-700 border-gray-200"}`,children:"Cursos"}),e.jsx("button",{type:"button",onClick:()=>i({type:"training"}),className:`px-3 py-2 text-sm rounded-lg border ${s==="training"?"bg-brand-600 text-white border-brand-600":"bg-white text-gray-700 border-gray-200"}`,children:"Treinamentos"})]}),e.jsxs("div",{className:"bg-white border border-gray-100 rounded-xl p-4 space-y-3",children:[e.jsxs("h2",{className:"text-sm font-semibold text-gray-700",children:["Novo ",h.slice(0,-1)]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsx("input",{value:a.title,onChange:t=>n(r=>({...r,title:t.target.value})),placeholder:"Título",className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"}),e.jsx("input",{value:a.thumbnail_url,onChange:t=>n(r=>({...r,thumbnail_url:t.target.value})),placeholder:"Thumbnail URL",className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"}),e.jsx("button",{type:"button",onClick:j,disabled:p,className:"px-3 py-2 bg-brand-600 text-white rounded-lg text-sm hover:bg-brand-700 disabled:opacity-50",children:"Criar"})]}),e.jsx("textarea",{value:a.description,onChange:t=>n(r=>({...r,description:t.target.value})),placeholder:"Descrição",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),g?e.jsx("div",{className:"h-48 flex items-center justify-center text-gray-500",children:"Carregando conteúdos..."}):o.length===0?e.jsx("div",{className:"bg-white border border-gray-100 rounded-xl p-6 text-gray-500 text-sm",children:"Nenhum conteúdo cadastrado."}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:o.map(t=>e.jsxs(v,{to:`/admin/content/${t.id}?tab=about&type=${s}`,className:"group bg-white border border-gray-100 rounded-xl overflow-hidden shadow-sm hover:shadow-md transition",children:[t.thumbnail_url?e.jsx("img",{src:t.thumbnail_url,alt:t.title||"Conteúdo",className:"h-40 w-full object-cover"}):e.jsx("div",{className:"h-40 w-full bg-gradient-to-br from-slate-100 to-slate-200"}),e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-gray-800 group-hover:text-brand-600",children:t.title||"Sem título"}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${t.published?"bg-emerald-50 text-emerald-700":"bg-gray-100 text-gray-600"}`,children:t.published?"Publicado":"Rascunho"})]}),t.description&&e.jsx("p",{className:"text-sm text-gray-600 line-clamp-3",children:t.description})]})]},t.id))})]})};export{_ as default};
