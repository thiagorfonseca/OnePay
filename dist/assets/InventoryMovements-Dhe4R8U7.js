import{u as y,r as t,j as a}from"./index-HcuLVkXM.js";import{a as v,d as f,S as g}from"./service-C61pE4fL.js";import{D as h}from"./DataTable-BxUe0ZZe.js";const _=()=>{const{effectiveClinicId:n}=y(),s=n,[o,c]=t.useState([]),[l,m]=t.useState([]),[d,r]=t.useState(!0);t.useEffect(()=>{s&&(r(!0),Promise.all([v(s),f(s,300)]).then(([e,p])=>{c(e),m(p)}).finally(()=>r(!1)))},[s]);const i=t.useMemo(()=>new Map(o.map(e=>[e.id,e.name])),[o]),u=t.useMemo(()=>[{header:"Data",accessorKey:"created_at",cell:({row:e})=>new Date(e.original.created_at).toLocaleString("pt-BR")},{header:"Tipo",accessorKey:"movement_type"},{header:"Item",accessorKey:"item_id",cell:({row:e})=>i.get(e.original.item_id)||"—"},{header:"Qtd",accessorKey:"qty_delta"},{header:"Lote",accessorKey:"batch_id",cell:({row:e})=>e.original.batch_id?.slice(0,8)||"—"},{header:"Motivo",accessorKey:"reason",cell:({row:e})=>e.original.reason||"—"}],[i]);return s?a.jsxs("div",{className:"space-y-6",children:[a.jsx(g,{title:"Movimentações",subtitle:"Ledger completo de entradas, consumos, perdas e ajustes."}),d?a.jsx("div",{className:"text-sm text-gray-500",children:"Carregando movimentações..."}):a.jsx(h,{data:l,columns:u,pageSize:10})]}):null};export{_ as default};
