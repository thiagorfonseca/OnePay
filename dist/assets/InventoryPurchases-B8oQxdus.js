import{u as Ae,r as B,j as m}from"./index-HcuLVkXM.js";import{u as Ie,b as _e}from"./index.esm-jdq0gOhA.js";import{S as Oe,j as Ce,a as je,f as Se,k as Fe,m as Ve,n as qe}from"./service-C61pE4fL.js";import{D as Le}from"./DataTable-BxUe0ZZe.js";import{I as Re}from"./ItemPicker-DiZaaD8I.js";import{t as z,n as G}from"./utils-C82WIfQD.js";import{P as ue}from"./plus-DDz1DOCh.js";import{X as $e}from"./x-Dm__mln4.js";var Z={},K={},le;function oe(){return le||(le=1,(function(E){const w=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",b=w+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",P="["+w+"]["+b+"]*",S=new RegExp("^"+P+"$"),A=function(r,s){const t=[];let e=s.exec(r);for(;e;){const f=[];f.startIndex=s.lastIndex-e[0].length;const u=e.length;for(let p=0;p<u;p++)f.push(e[p]);t.push(f),e=s.exec(r)}return t},l=function(r){const s=S.exec(r);return!(s===null||typeof s>"u")};E.isExist=function(r){return typeof r<"u"},E.isEmptyObject=function(r){return Object.keys(r).length===0},E.merge=function(r,s,t){if(s){const e=Object.keys(s),f=e.length;for(let u=0;u<f;u++)t==="strict"?r[e[u]]=[s[e[u]]]:r[e[u]]=s[e[u]]}},E.getValue=function(r){return E.isExist(r)?r:""},E.isName=l,E.getAllMatches=A,E.nameRegexp=P})(K)),K}var de;function ve(){if(de)return Z;de=1;const E=oe(),w={allowBooleanAttributes:!1,unpairedTags:[]};Z.validate=function(n,a){a=Object.assign({},w,a);const N=[];let _=!1,i=!1;n[0]==="\uFEFF"&&(n=n.substr(1));for(let o=0;o<n.length;o++)if(n[o]==="<"&&n[o+1]==="?"){if(o+=2,o=P(n,o),o.err)return o}else if(n[o]==="<"){let d=o;if(o++,n[o]==="!"){o=S(n,o);continue}else{let T=!1;n[o]==="/"&&(T=!0,o++);let c="";for(;o<n.length&&n[o]!==">"&&n[o]!==" "&&n[o]!=="	"&&n[o]!==`
`&&n[o]!=="\r";o++)c+=n[o];if(c=c.trim(),c[c.length-1]==="/"&&(c=c.substring(0,c.length-1),o--),!v(c)){let y;return c.trim().length===0?y="Invalid space after '<'.":y="Tag '"+c+"' is an invalid name.",u("InvalidTag",y,x(n,o))}const g=r(n,o);if(g===!1)return u("InvalidAttr","Attributes for '"+c+"' have open quote.",x(n,o));let I=g.value;if(o=g.index,I[I.length-1]==="/"){const y=o-I.length;I=I.substring(0,I.length-1);const h=t(I,a);if(h===!0)_=!0;else return u(h.err.code,h.err.msg,x(n,y+h.err.line))}else if(T)if(g.tagClosed){if(I.trim().length>0)return u("InvalidTag","Closing tag '"+c+"' can't have attributes or invalid starting.",x(n,d));if(N.length===0)return u("InvalidTag","Closing tag '"+c+"' has not been opened.",x(n,d));{const y=N.pop();if(c!==y.tagName){let h=x(n,y.tagStartPos);return u("InvalidTag","Expected closing tag '"+y.tagName+"' (opened in line "+h.line+", col "+h.col+") instead of closing tag '"+c+"'.",x(n,d))}N.length==0&&(i=!0)}}else return u("InvalidTag","Closing tag '"+c+"' doesn't have proper closing.",x(n,o));else{const y=t(I,a);if(y!==!0)return u(y.err.code,y.err.msg,x(n,o-I.length+y.err.line));if(i===!0)return u("InvalidXml","Multiple possible root nodes found.",x(n,o));a.unpairedTags.indexOf(c)!==-1||N.push({tagName:c,tagStartPos:d}),_=!0}for(o++;o<n.length;o++)if(n[o]==="<")if(n[o+1]==="!"){o++,o=S(n,o);continue}else if(n[o+1]==="?"){if(o=P(n,++o),o.err)return o}else break;else if(n[o]==="&"){const y=f(n,o);if(y==-1)return u("InvalidChar","char '&' is not expected.",x(n,o));o=y}else if(i===!0&&!b(n[o]))return u("InvalidXml","Extra text at the end",x(n,o));n[o]==="<"&&o--}}else{if(b(n[o]))continue;return u("InvalidChar","char '"+n[o]+"' is not expected.",x(n,o))}if(_){if(N.length==1)return u("InvalidTag","Unclosed tag '"+N[0].tagName+"'.",x(n,N[0].tagStartPos));if(N.length>0)return u("InvalidXml","Invalid '"+JSON.stringify(N.map(o=>o.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return u("InvalidXml","Start tag expected.",1);return!0};function b(n){return n===" "||n==="	"||n===`
`||n==="\r"}function P(n,a){const N=a;for(;a<n.length;a++)if(n[a]=="?"||n[a]==" "){const _=n.substr(N,a-N);if(a>5&&_==="xml")return u("InvalidXml","XML declaration allowed only at the start of the document.",x(n,a));if(n[a]=="?"&&n[a+1]==">"){a++;break}else continue}return a}function S(n,a){if(n.length>a+5&&n[a+1]==="-"&&n[a+2]==="-"){for(a+=3;a<n.length;a++)if(n[a]==="-"&&n[a+1]==="-"&&n[a+2]===">"){a+=2;break}}else if(n.length>a+8&&n[a+1]==="D"&&n[a+2]==="O"&&n[a+3]==="C"&&n[a+4]==="T"&&n[a+5]==="Y"&&n[a+6]==="P"&&n[a+7]==="E"){let N=1;for(a+=8;a<n.length;a++)if(n[a]==="<")N++;else if(n[a]===">"&&(N--,N===0))break}else if(n.length>a+9&&n[a+1]==="["&&n[a+2]==="C"&&n[a+3]==="D"&&n[a+4]==="A"&&n[a+5]==="T"&&n[a+6]==="A"&&n[a+7]==="["){for(a+=8;a<n.length;a++)if(n[a]==="]"&&n[a+1]==="]"&&n[a+2]===">"){a+=2;break}}return a}const A='"',l="'";function r(n,a){let N="",_="",i=!1;for(;a<n.length;a++){if(n[a]===A||n[a]===l)_===""?_=n[a]:_!==n[a]||(_="");else if(n[a]===">"&&_===""){i=!0;break}N+=n[a]}return _!==""?!1:{value:N,index:a,tagClosed:i}}const s=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function t(n,a){const N=E.getAllMatches(n,s),_={};for(let i=0;i<N.length;i++){if(N[i][1].length===0)return u("InvalidAttr","Attribute '"+N[i][2]+"' has no space in starting.",F(N[i]));if(N[i][3]!==void 0&&N[i][4]===void 0)return u("InvalidAttr","Attribute '"+N[i][2]+"' is without value.",F(N[i]));if(N[i][3]===void 0&&!a.allowBooleanAttributes)return u("InvalidAttr","boolean attribute '"+N[i][2]+"' is not allowed.",F(N[i]));const o=N[i][2];if(!p(o))return u("InvalidAttr","Attribute '"+o+"' is an invalid name.",F(N[i]));if(!_.hasOwnProperty(o))_[o]=1;else return u("InvalidAttr","Attribute '"+o+"' is repeated.",F(N[i]))}return!0}function e(n,a){let N=/\d/;for(n[a]==="x"&&(a++,N=/[\da-fA-F]/);a<n.length;a++){if(n[a]===";")return a;if(!n[a].match(N))break}return-1}function f(n,a){if(a++,n[a]===";")return-1;if(n[a]==="#")return a++,e(n,a);let N=0;for(;a<n.length;a++,N++)if(!(n[a].match(/\w/)&&N<20)){if(n[a]===";")break;return-1}return a}function u(n,a,N){return{err:{code:n,msg:a,line:N.line||N,col:N.col}}}function p(n){return E.isName(n)}function v(n){return E.isName(n)}function x(n,a){const N=n.substring(0,a).split(/\r?\n/);return{line:N.length,col:N[N.length-1].length+1}}function F(n){return n.startIndex+n[1].length}return Z}var U={},ce;function Xe(){if(ce)return U;ce=1;const E={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(b,P){return P},attributeValueProcessor:function(b,P){return P},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(b,P,S){return b}},w=function(b){return Object.assign({},E,b)};return U.buildOptions=w,U.defaultOptions=E,U}var Y,fe;function ke(){if(fe)return Y;fe=1;class E{constructor(b){this.tagname=b,this.child=[],this[":@"]={}}add(b,P){b==="__proto__"&&(b="#__proto__"),this.child.push({[b]:P})}addChild(b){b.tagname==="__proto__"&&(b.tagname="#__proto__"),b[":@"]&&Object.keys(b[":@"]).length>0?this.child.push({[b.tagname]:b.child,":@":b[":@"]}):this.child.push({[b.tagname]:b.child})}}return Y=E,Y}var W,pe;function Be(){if(pe)return W;pe=1;const E=oe();function w(t,e){const f={};if(t[e+3]==="O"&&t[e+4]==="C"&&t[e+5]==="T"&&t[e+6]==="Y"&&t[e+7]==="P"&&t[e+8]==="E"){e=e+9;let u=1,p=!1,v=!1,x="";for(;e<t.length;e++)if(t[e]==="<"&&!v){if(p&&S(t,e)){e+=7;let F,n;[F,n,e]=b(t,e+1),n.indexOf("&")===-1&&(f[s(F)]={regx:RegExp(`&${F};`,"g"),val:n})}else if(p&&A(t,e))e+=8;else if(p&&l(t,e))e+=8;else if(p&&r(t,e))e+=9;else if(P)v=!0;else throw new Error("Invalid DOCTYPE");u++,x=""}else if(t[e]===">"){if(v?t[e-1]==="-"&&t[e-2]==="-"&&(v=!1,u--):u--,u===0)break}else t[e]==="["?p=!0:x+=t[e];if(u!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:f,i:e}}function b(t,e){let f="";for(;e<t.length&&t[e]!=="'"&&t[e]!=='"';e++)f+=t[e];if(f=f.trim(),f.indexOf(" ")!==-1)throw new Error("External entites are not supported");const u=t[e++];let p="";for(;e<t.length&&t[e]!==u;e++)p+=t[e];return[f,p,e]}function P(t,e){return t[e+1]==="!"&&t[e+2]==="-"&&t[e+3]==="-"}function S(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="N"&&t[e+4]==="T"&&t[e+5]==="I"&&t[e+6]==="T"&&t[e+7]==="Y"}function A(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="L"&&t[e+4]==="E"&&t[e+5]==="M"&&t[e+6]==="E"&&t[e+7]==="N"&&t[e+8]==="T"}function l(t,e){return t[e+1]==="!"&&t[e+2]==="A"&&t[e+3]==="T"&&t[e+4]==="T"&&t[e+5]==="L"&&t[e+6]==="I"&&t[e+7]==="S"&&t[e+8]==="T"}function r(t,e){return t[e+1]==="!"&&t[e+2]==="N"&&t[e+3]==="O"&&t[e+4]==="T"&&t[e+5]==="A"&&t[e+6]==="T"&&t[e+7]==="I"&&t[e+8]==="O"&&t[e+9]==="N"}function s(t){if(E.isName(t))return t;throw new Error(`Invalid entity name ${t}`)}return W=w,W}var Q,he;function Me(){if(he)return Q;he=1;const E=/^[-+]?0x[a-fA-F0-9]+$/,w=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,b={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function P(l,r={}){if(r=Object.assign({},b,r),!l||typeof l!="string")return l;let s=l.trim();if(r.skipLike!==void 0&&r.skipLike.test(s))return l;if(l==="0")return 0;if(r.hex&&E.test(s))return A(s,16);if(s.search(/[eE]/)!==-1){const t=s.match(/^([-\+])?(0*)([0-9]*(\.[0-9]*)?[eE][-\+]?[0-9]+)$/);if(t){if(r.leadingZeros)s=(t[1]||"")+t[3];else if(!(t[2]==="0"&&t[3][0]==="."))return l;return r.eNotation?Number(s):l}else return l}else{const t=w.exec(s);if(t){const e=t[1],f=t[2];let u=S(t[3]);if(!r.leadingZeros&&f.length>0&&e&&s[2]!==".")return l;if(!r.leadingZeros&&f.length>0&&!e&&s[1]!==".")return l;if(r.leadingZeros&&f===l)return 0;{const p=Number(s),v=""+p;return v.search(/[eE]/)!==-1?r.eNotation?p:l:s.indexOf(".")!==-1?v==="0"&&u===""||v===u||e&&v==="-"+u?p:l:f?u===v||e+u===v?p:l:s===v||s===e+v?p:l}}else return l}}function S(l){return l&&l.indexOf(".")!==-1&&(l=l.replace(/0+$/,""),l==="."?l="0":l[0]==="."?l="0"+l:l[l.length-1]==="."&&(l=l.substr(0,l.length-1))),l}function A(l,r){if(parseInt)return parseInt(l,r);if(Number.parseInt)return Number.parseInt(l,r);if(window&&window.parseInt)return window.parseInt(l,r);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}return Q=P,Q}var H,ge;function we(){if(ge)return H;ge=1;function E(w){return typeof w=="function"?w:Array.isArray(w)?b=>{for(const P of w)if(typeof P=="string"&&b===P||P instanceof RegExp&&P.test(b))return!0}:()=>!1}return H=E,H}var D,me;function Ge(){if(me)return D;me=1;const E=oe(),w=ke(),b=Be(),P=Me(),S=we();class A{constructor(o){this.options=o,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(d,T)=>String.fromCharCode(Number.parseInt(T,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(d,T)=>String.fromCharCode(Number.parseInt(T,16))}},this.addExternalEntities=l,this.parseXml=f,this.parseTextData=r,this.resolveNameSpace=s,this.buildAttributesMap=e,this.isItStopNode=x,this.replaceEntitiesValue=p,this.readStopNodeData=N,this.saveTextToParentTag=v,this.addChild=u,this.ignoreAttributesFn=S(this.options.ignoreAttributes)}}function l(i){const o=Object.keys(i);for(let d=0;d<o.length;d++){const T=o[d];this.lastEntities[T]={regex:new RegExp("&"+T+";","g"),val:i[T]}}}function r(i,o,d,T,c,g,I){if(i!==void 0&&(this.options.trimValues&&!T&&(i=i.trim()),i.length>0)){I||(i=this.replaceEntitiesValue(i));const y=this.options.tagValueProcessor(o,i,d,c,g);return y==null?i:typeof y!=typeof i||y!==i?y:this.options.trimValues?_(i,this.options.parseTagValue,this.options.numberParseOptions):i.trim()===i?_(i,this.options.parseTagValue,this.options.numberParseOptions):i}}function s(i){if(this.options.removeNSPrefix){const o=i.split(":"),d=i.charAt(0)==="/"?"/":"";if(o[0]==="xmlns")return"";o.length===2&&(i=d+o[1])}return i}const t=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function e(i,o,d){if(this.options.ignoreAttributes!==!0&&typeof i=="string"){const T=E.getAllMatches(i,t),c=T.length,g={};for(let I=0;I<c;I++){const y=this.resolveNameSpace(T[I][1]);if(this.ignoreAttributesFn(y,o))continue;let h=T[I][4],q=this.options.attributeNamePrefix+y;if(y.length)if(this.options.transformAttributeName&&(q=this.options.transformAttributeName(q)),q==="__proto__"&&(q="#__proto__"),h!==void 0){this.options.trimValues&&(h=h.trim()),h=this.replaceEntitiesValue(h);const O=this.options.attributeValueProcessor(y,h,o);O==null?g[q]=h:typeof O!=typeof h||O!==h?g[q]=O:g[q]=_(h,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(g[q]=!0)}if(!Object.keys(g).length)return;if(this.options.attributesGroupName){const I={};return I[this.options.attributesGroupName]=g,I}return g}}const f=function(i){i=i.replace(/\r\n?/g,`
`);const o=new w("!xml");let d=o,T="",c="";for(let g=0;g<i.length;g++)if(i[g]==="<")if(i[g+1]==="/"){const y=n(i,">",g,"Closing Tag is not closed.");let h=i.substring(g+2,y).trim();if(this.options.removeNSPrefix){const X=h.indexOf(":");X!==-1&&(h=h.substr(X+1))}this.options.transformTagName&&(h=this.options.transformTagName(h)),d&&(T=this.saveTextToParentTag(T,d,c));const q=c.substring(c.lastIndexOf(".")+1);if(h&&this.options.unpairedTags.indexOf(h)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${h}>`);let O=0;q&&this.options.unpairedTags.indexOf(q)!==-1?(O=c.lastIndexOf(".",c.lastIndexOf(".")-1),this.tagsNodeStack.pop()):O=c.lastIndexOf("."),c=c.substring(0,O),d=this.tagsNodeStack.pop(),T="",g=y}else if(i[g+1]==="?"){let y=a(i,g,!1,"?>");if(!y)throw new Error("Pi Tag is not closed.");if(T=this.saveTextToParentTag(T,d,c),!(this.options.ignoreDeclaration&&y.tagName==="?xml"||this.options.ignorePiTags)){const h=new w(y.tagName);h.add(this.options.textNodeName,""),y.tagName!==y.tagExp&&y.attrExpPresent&&(h[":@"]=this.buildAttributesMap(y.tagExp,c,y.tagName)),this.addChild(d,h,c)}g=y.closeIndex+1}else if(i.substr(g+1,3)==="!--"){const y=n(i,"-->",g+4,"Comment is not closed.");if(this.options.commentPropName){const h=i.substring(g+4,y-2);T=this.saveTextToParentTag(T,d,c),d.add(this.options.commentPropName,[{[this.options.textNodeName]:h}])}g=y}else if(i.substr(g+1,2)==="!D"){const y=b(i,g);this.docTypeEntities=y.entities,g=y.i}else if(i.substr(g+1,2)==="!["){const y=n(i,"]]>",g,"CDATA is not closed.")-2,h=i.substring(g+9,y);T=this.saveTextToParentTag(T,d,c);let q=this.parseTextData(h,d.tagname,c,!0,!1,!0,!0);q==null&&(q=""),this.options.cdataPropName?d.add(this.options.cdataPropName,[{[this.options.textNodeName]:h}]):d.add(this.options.textNodeName,q),g=y+2}else{let y=a(i,g,this.options.removeNSPrefix),h=y.tagName;const q=y.rawTagName;let O=y.tagExp,X=y.attrExpPresent,M=y.closeIndex;this.options.transformTagName&&(h=this.options.transformTagName(h)),d&&T&&d.tagname!=="!xml"&&(T=this.saveTextToParentTag(T,d,c,!1));const C=d;if(C&&this.options.unpairedTags.indexOf(C.tagname)!==-1&&(d=this.tagsNodeStack.pop(),c=c.substring(0,c.lastIndexOf("."))),h!==o.tagname&&(c+=c?"."+h:h),this.isItStopNode(this.options.stopNodes,c,h)){let j="";if(O.length>0&&O.lastIndexOf("/")===O.length-1)h[h.length-1]==="/"?(h=h.substr(0,h.length-1),c=c.substr(0,c.length-1),O=h):O=O.substr(0,O.length-1),g=y.closeIndex;else if(this.options.unpairedTags.indexOf(h)!==-1)g=y.closeIndex;else{const V=this.readStopNodeData(i,q,M+1);if(!V)throw new Error(`Unexpected end of ${q}`);g=V.i,j=V.tagContent}const L=new w(h);h!==O&&X&&(L[":@"]=this.buildAttributesMap(O,c,h)),j&&(j=this.parseTextData(j,h,c,!0,X,!0,!0)),c=c.substr(0,c.lastIndexOf(".")),L.add(this.options.textNodeName,j),this.addChild(d,L,c)}else{if(O.length>0&&O.lastIndexOf("/")===O.length-1){h[h.length-1]==="/"?(h=h.substr(0,h.length-1),c=c.substr(0,c.length-1),O=h):O=O.substr(0,O.length-1),this.options.transformTagName&&(h=this.options.transformTagName(h));const j=new w(h);h!==O&&X&&(j[":@"]=this.buildAttributesMap(O,c,h)),this.addChild(d,j,c),c=c.substr(0,c.lastIndexOf("."))}else{const j=new w(h);this.tagsNodeStack.push(d),h!==O&&X&&(j[":@"]=this.buildAttributesMap(O,c,h)),this.addChild(d,j,c),d=j}T="",g=M}}else T+=i[g];return o.child};function u(i,o,d){const T=this.options.updateTag(o.tagname,d,o[":@"]);T===!1||(typeof T=="string"&&(o.tagname=T),i.addChild(o))}const p=function(i){if(this.options.processEntities){for(let o in this.docTypeEntities){const d=this.docTypeEntities[o];i=i.replace(d.regx,d.val)}for(let o in this.lastEntities){const d=this.lastEntities[o];i=i.replace(d.regex,d.val)}if(this.options.htmlEntities)for(let o in this.htmlEntities){const d=this.htmlEntities[o];i=i.replace(d.regex,d.val)}i=i.replace(this.ampEntity.regex,this.ampEntity.val)}return i};function v(i,o,d,T){return i&&(T===void 0&&(T=o.child.length===0),i=this.parseTextData(i,o.tagname,d,!1,o[":@"]?Object.keys(o[":@"]).length!==0:!1,T),i!==void 0&&i!==""&&o.add(this.options.textNodeName,i),i=""),i}function x(i,o,d){const T="*."+d;for(const c in i){const g=i[c];if(T===g||o===g)return!0}return!1}function F(i,o,d=">"){let T,c="";for(let g=o;g<i.length;g++){let I=i[g];if(T)I===T&&(T="");else if(I==='"'||I==="'")T=I;else if(I===d[0])if(d[1]){if(i[g+1]===d[1])return{data:c,index:g}}else return{data:c,index:g};else I==="	"&&(I=" ");c+=I}}function n(i,o,d,T){const c=i.indexOf(o,d);if(c===-1)throw new Error(T);return c+o.length-1}function a(i,o,d,T=">"){const c=F(i,o+1,T);if(!c)return;let g=c.data;const I=c.index,y=g.search(/\s/);let h=g,q=!0;y!==-1&&(h=g.substring(0,y),g=g.substring(y+1).trimStart());const O=h;if(d){const X=h.indexOf(":");X!==-1&&(h=h.substr(X+1),q=h!==c.data.substr(X+1))}return{tagName:h,tagExp:g,closeIndex:I,attrExpPresent:q,rawTagName:O}}function N(i,o,d){const T=d;let c=1;for(;d<i.length;d++)if(i[d]==="<")if(i[d+1]==="/"){const g=n(i,">",d,`${o} is not closed`);if(i.substring(d+2,g).trim()===o&&(c--,c===0))return{tagContent:i.substring(T,d),i:g};d=g}else if(i[d+1]==="?")d=n(i,"?>",d+1,"StopNode is not closed.");else if(i.substr(d+1,3)==="!--")d=n(i,"-->",d+3,"StopNode is not closed.");else if(i.substr(d+1,2)==="![")d=n(i,"]]>",d,"StopNode is not closed.")-2;else{const g=a(i,d,">");g&&((g&&g.tagName)===o&&g.tagExp[g.tagExp.length-1]!=="/"&&c++,d=g.closeIndex)}}function _(i,o,d){if(o&&typeof i=="string"){const T=i.trim();return T==="true"?!0:T==="false"?!1:P(i,d)}else return E.isExist(i)?i:""}return D=A,D}var ee={},Ne;function Ue(){if(Ne)return ee;Ne=1;function E(A,l){return w(A,l)}function w(A,l,r){let s;const t={};for(let e=0;e<A.length;e++){const f=A[e],u=b(f);let p="";if(r===void 0?p=u:p=r+"."+u,u===l.textNodeName)s===void 0?s=f[u]:s+=""+f[u];else{if(u===void 0)continue;if(f[u]){let v=w(f[u],l,p);const x=S(v,l);f[":@"]?P(v,f[":@"],p,l):Object.keys(v).length===1&&v[l.textNodeName]!==void 0&&!l.alwaysCreateTextNode?v=v[l.textNodeName]:Object.keys(v).length===0&&(l.alwaysCreateTextNode?v[l.textNodeName]="":v=""),t[u]!==void 0&&t.hasOwnProperty(u)?(Array.isArray(t[u])||(t[u]=[t[u]]),t[u].push(v)):l.isArray(u,p,x)?t[u]=[v]:t[u]=v}}}return typeof s=="string"?s.length>0&&(t[l.textNodeName]=s):s!==void 0&&(t[l.textNodeName]=s),t}function b(A){const l=Object.keys(A);for(let r=0;r<l.length;r++){const s=l[r];if(s!==":@")return s}}function P(A,l,r,s){if(l){const t=Object.keys(l),e=t.length;for(let f=0;f<e;f++){const u=t[f];s.isArray(u,r+"."+u,!0,!0)?A[u]=[l[u]]:A[u]=l[u]}}}function S(A,l){const{textNodeName:r}=l,s=Object.keys(A).length;return!!(s===0||s===1&&(A[r]||typeof A[r]=="boolean"||A[r]===0))}return ee.prettify=E,ee}var te,be;function Je(){if(be)return te;be=1;const{buildOptions:E}=Xe(),w=Ge(),{prettify:b}=Ue(),P=ve();class S{constructor(l){this.externalEntities={},this.options=E(l)}parse(l,r){if(typeof l!="string")if(l.toString)l=l.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});const e=P.validate(l,r);if(e!==!0)throw Error(`${e.err.msg}:${e.err.line}:${e.err.col}`)}const s=new w(this.options);s.addExternalEntities(this.externalEntities);const t=s.parseXml(l);return this.options.preserveOrder||t===void 0?t:b(t,this.options)}addEntity(l,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(l.indexOf("&")!==-1||l.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[l]=r}}return te=S,te}var se,xe;function ze(){if(xe)return se;xe=1;const E=`
`;function w(r,s){let t="";return s.format&&s.indentBy.length>0&&(t=E),b(r,s,"",t)}function b(r,s,t,e){let f="",u=!1;for(let p=0;p<r.length;p++){const v=r[p],x=P(v);if(x===void 0)continue;let F="";if(t.length===0?F=x:F=`${t}.${x}`,x===s.textNodeName){let i=v[x];A(F,s)||(i=s.tagValueProcessor(x,i),i=l(i,s)),u&&(f+=e),f+=i,u=!1;continue}else if(x===s.cdataPropName){u&&(f+=e),f+=`<![CDATA[${v[x][0][s.textNodeName]}]]>`,u=!1;continue}else if(x===s.commentPropName){f+=e+`<!--${v[x][0][s.textNodeName]}-->`,u=!0;continue}else if(x[0]==="?"){const i=S(v[":@"],s),o=x==="?xml"?"":e;let d=v[x][0][s.textNodeName];d=d.length!==0?" "+d:"",f+=o+`<${x}${d}${i}?>`,u=!0;continue}let n=e;n!==""&&(n+=s.indentBy);const a=S(v[":@"],s),N=e+`<${x}${a}`,_=b(v[x],s,F,n);s.unpairedTags.indexOf(x)!==-1?s.suppressUnpairedNode?f+=N+">":f+=N+"/>":(!_||_.length===0)&&s.suppressEmptyNode?f+=N+"/>":_&&_.endsWith(">")?f+=N+`>${_}${e}</${x}>`:(f+=N+">",_&&e!==""&&(_.includes("/>")||_.includes("</"))?f+=e+s.indentBy+_+e:f+=_,f+=`</${x}>`),u=!0}return f}function P(r){const s=Object.keys(r);for(let t=0;t<s.length;t++){const e=s[t];if(r.hasOwnProperty(e)&&e!==":@")return e}}function S(r,s){let t="";if(r&&!s.ignoreAttributes)for(let e in r){if(!r.hasOwnProperty(e))continue;let f=s.attributeValueProcessor(e,r[e]);f=l(f,s),f===!0&&s.suppressBooleanAttributes?t+=` ${e.substr(s.attributeNamePrefix.length)}`:t+=` ${e.substr(s.attributeNamePrefix.length)}="${f}"`}return t}function A(r,s){r=r.substr(0,r.length-s.textNodeName.length-1);let t=r.substr(r.lastIndexOf(".")+1);for(let e in s.stopNodes)if(s.stopNodes[e]===r||s.stopNodes[e]==="*."+t)return!0;return!1}function l(r,s){if(r&&r.length>0&&s.processEntities)for(let t=0;t<s.entities.length;t++){const e=s.entities[t];r=r.replace(e.regex,e.val)}return r}return se=w,se}var re,ye;function Ze(){if(ye)return re;ye=1;const E=ze(),w=we(),b={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(r,s){return s},attributeValueProcessor:function(r,s){return s},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function P(r){this.options=Object.assign({},b,r),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=w(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=l),this.processTextOrObjNode=S,this.options.format?(this.indentate=A,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}P.prototype.build=function(r){return this.options.preserveOrder?E(r,this.options):(Array.isArray(r)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(r={[this.options.arrayNodeName]:r}),this.j2x(r,0,[]).val)},P.prototype.j2x=function(r,s,t){let e="",f="";const u=t.join(".");for(let p in r)if(Object.prototype.hasOwnProperty.call(r,p))if(typeof r[p]>"u")this.isAttribute(p)&&(f+="");else if(r[p]===null)this.isAttribute(p)||p===this.options.cdataPropName?f+="":p[0]==="?"?f+=this.indentate(s)+"<"+p+"?"+this.tagEndChar:f+=this.indentate(s)+"<"+p+"/"+this.tagEndChar;else if(r[p]instanceof Date)f+=this.buildTextValNode(r[p],p,"",s);else if(typeof r[p]!="object"){const v=this.isAttribute(p);if(v&&!this.ignoreAttributesFn(v,u))e+=this.buildAttrPairStr(v,""+r[p]);else if(!v)if(p===this.options.textNodeName){let x=this.options.tagValueProcessor(p,""+r[p]);f+=this.replaceEntitiesValue(x)}else f+=this.buildTextValNode(r[p],p,"",s)}else if(Array.isArray(r[p])){const v=r[p].length;let x="",F="";for(let n=0;n<v;n++){const a=r[p][n];if(!(typeof a>"u"))if(a===null)p[0]==="?"?f+=this.indentate(s)+"<"+p+"?"+this.tagEndChar:f+=this.indentate(s)+"<"+p+"/"+this.tagEndChar;else if(typeof a=="object")if(this.options.oneListGroup){const N=this.j2x(a,s+1,t.concat(p));x+=N.val,this.options.attributesGroupName&&a.hasOwnProperty(this.options.attributesGroupName)&&(F+=N.attrStr)}else x+=this.processTextOrObjNode(a,p,s,t);else if(this.options.oneListGroup){let N=this.options.tagValueProcessor(p,a);N=this.replaceEntitiesValue(N),x+=N}else x+=this.buildTextValNode(a,p,"",s)}this.options.oneListGroup&&(x=this.buildObjectNode(x,p,F,s)),f+=x}else if(this.options.attributesGroupName&&p===this.options.attributesGroupName){const v=Object.keys(r[p]),x=v.length;for(let F=0;F<x;F++)e+=this.buildAttrPairStr(v[F],""+r[p][v[F]])}else f+=this.processTextOrObjNode(r[p],p,s,t);return{attrStr:e,val:f}},P.prototype.buildAttrPairStr=function(r,s){return s=this.options.attributeValueProcessor(r,""+s),s=this.replaceEntitiesValue(s),this.options.suppressBooleanAttributes&&s==="true"?" "+r:" "+r+'="'+s+'"'};function S(r,s,t,e){const f=this.j2x(r,t+1,e.concat(s));return r[this.options.textNodeName]!==void 0&&Object.keys(r).length===1?this.buildTextValNode(r[this.options.textNodeName],s,f.attrStr,t):this.buildObjectNode(f.val,s,f.attrStr,t)}P.prototype.buildObjectNode=function(r,s,t,e){if(r==="")return s[0]==="?"?this.indentate(e)+"<"+s+t+"?"+this.tagEndChar:this.indentate(e)+"<"+s+t+this.closeTag(s)+this.tagEndChar;{let f="</"+s+this.tagEndChar,u="";return s[0]==="?"&&(u="?",f=""),(t||t==="")&&r.indexOf("<")===-1?this.indentate(e)+"<"+s+t+u+">"+r+f:this.options.commentPropName!==!1&&s===this.options.commentPropName&&u.length===0?this.indentate(e)+`<!--${r}-->`+this.newLine:this.indentate(e)+"<"+s+t+u+this.tagEndChar+r+this.indentate(e)+f}},P.prototype.closeTag=function(r){let s="";return this.options.unpairedTags.indexOf(r)!==-1?this.options.suppressUnpairedNode||(s="/"):this.options.suppressEmptyNode?s="/":s=`></${r}`,s},P.prototype.buildTextValNode=function(r,s,t,e){if(this.options.cdataPropName!==!1&&s===this.options.cdataPropName)return this.indentate(e)+`<![CDATA[${r}]]>`+this.newLine;if(this.options.commentPropName!==!1&&s===this.options.commentPropName)return this.indentate(e)+`<!--${r}-->`+this.newLine;if(s[0]==="?")return this.indentate(e)+"<"+s+t+"?"+this.tagEndChar;{let f=this.options.tagValueProcessor(s,r);return f=this.replaceEntitiesValue(f),f===""?this.indentate(e)+"<"+s+t+this.closeTag(s)+this.tagEndChar:this.indentate(e)+"<"+s+t+">"+f+"</"+s+this.tagEndChar}},P.prototype.replaceEntitiesValue=function(r){if(r&&r.length>0&&this.options.processEntities)for(let s=0;s<this.options.entities.length;s++){const t=this.options.entities[s];r=r.replace(t.regex,t.val)}return r};function A(r){return this.options.indentBy.repeat(r)}function l(r){return r.startsWith(this.options.attributeNamePrefix)&&r!==this.options.textNodeName?r.substr(this.attrPrefixLen):!1}return re=P,re}var ne,Ee;function Ke(){if(Ee)return ne;Ee=1;const E=ve(),w=Je(),b=Ze();return ne={XMLParser:w,XMLValidator:E,XMLBuilder:b},ne}var Ye=Ke();const We=new Ye.XMLParser({ignoreAttributes:!1,attributeNamePrefix:"",removeNSPrefix:!0,trimValues:!0}),k=E=>E==null?null:typeof E=="string"?E.trim():typeof E=="number"?String(E):typeof E=="object"&&"text"in E?String(E.text||"").trim():null,ie=E=>E?E.includes("T")?E.split("T")[0]:E:null,Te=E=>E?Array.isArray(E)?E:[E]:[],Qe=E=>{if(!E)return{items:[]};let w;try{w=We.parse(E)}catch{return{items:[]}}const b=w?.nfeProc?.NFe||w?.NFe||w?.nfe||w?.nfeProc?.nfe||w?.procNFe?.NFe,P=b?.infNFe||b?.infNfe||b?.infNFeSupl?.infNFe||b?.infNFeSupl,S=P?.ide||b?.ide||w?.ide,A=P?.emit||b?.emit||w?.emit,l=P?.det||b?.det||w?.det,r=k(S?.nNF||S?.nNf||S?.nNFIS),s=ie(k(S?.dhEmi||S?.dEmi)),t=k(A?.xNome||A?.xFant),e=k(A?.CNPJ||A?.CPF),f=Te(l).map(u=>{const p=u?.prod||u?.Produto||{},x=Te(u?.rastro||p?.rastro||u?.med||p?.med)[0]||{};return{description:k(p?.xProd)||"Item importado",quantity:z(k(p?.qCom||p?.qTrib)||0),unit_cost:z(k(p?.vUnCom||p?.vUnTrib)||0),total_cost:z(k(p?.vProd)||0),barcode:k(p?.cEAN||p?.cEANTrib),batch_code:k(x?.nLote||x?.lote),expiry_date:ie(k(x?.dVal||x?.validade)),manufacture_date:ie(k(x?.dFab||x?.fabricacao))}});return{invoiceNumber:r,issueDate:s,supplierName:t,supplierCnpj:e,items:f}},ot=()=>{const{effectiveClinicId:E,session:w}=Ae(),b=E,[P,S]=B.useState([]),[A,l]=B.useState([]),[r,s]=B.useState([]),[t,e]=B.useState({}),[f,u]=B.useState(!0),[p,v]=B.useState(!1),[x,F]=B.useState(null),[n,a]=B.useState(null),[N,_]=B.useState(null),{control:i,register:o,handleSubmit:d,reset:T,setValue:c,getValues:g}=Ie({defaultValues:{items:[{item_id:"",quantity:1}]}}),{fields:I,append:y,remove:h}=_e({control:i,name:"items"}),q=async()=>{if(b){u(!0);try{const[C,j,L,V]=await Promise.all([Ce(b),je(b),Se(b),Fe(b)]);S(C),l(j),s(L);const R={};V.forEach($=>{const J=String($.barcode||"").replace(/\D/g,"");J&&(R[J]=$.item_id)}),e(R)}finally{u(!1)}}};B.useEffect(()=>{q()},[b]);const O=async C=>{if(!b)return;const j={clinic_id:b,supplier_id:C.supplier_id||null,invoice_number:C.invoice_number||null,issue_date:C.issue_date||null,received_at:C.received_at||null,notes:C.notes||null,status:"posted",items:C.items.map(V=>({item_id:V.item_id,description:V.description,quantity:Number(V.quantity||0),unit_cost:V.unit_cost?Number(V.unit_cost):null,total_cost:V.total_cost?Number(V.total_cost):null,batch_code:V.batch_code||null,expiry_date:V.expiry_date||null,barcode:V.barcode||null}))},L=await Ve(j);x&&await qe(b,L,x),v(!1),F(null),T({items:[{item_id:"",quantity:1}]}),await q()},X=async C=>{a(null),_(null);const j=await C.text();let L=null;if(w?.access_token)try{const V=await fetch("https://kevzqjffwbcjxvoebfll.supabase.co/functions/v1/inventory-parse-nfe",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${w.access_token}`},body:JSON.stringify({xml:j})});V.ok&&(L=await V.json(),_("Servidor"))}catch{L=null}if(L||(L=Qe(j),_("Local")),L.invoiceNumber&&c("invoice_number",L.invoiceNumber),L.issueDate&&c("issue_date",L.issueDate),L.supplierCnpj){const V=String(L.supplierCnpj).replace(/\D/g,""),R=r.find($=>String($.cnpj||"").replace(/\D/g,"")===V);R&&c("supplier_id",R.id)}else if(L.supplierName){const V=G(L.supplierName);if(V.length>=3){const R=r.find($=>G($.nome||"").includes(V));R&&c("supplier_id",R.id)}}if(L.items.length){const V=g();T({...V,items:L.items.map(R=>({item_id:(()=>{if(R.barcode){const $=String(R.barcode).replace(/\D/g,"");if($&&t[$])return t[$]}if(R.description){const $=G(R.description);if($.length>=3)return A.find(Pe=>{const ae=G(Pe.name);return $.includes(ae)||ae.includes($)})?.id||""}return""})(),description:R.description,quantity:R.quantity,unit_cost:R.unit_cost||(R.total_cost&&R.quantity?Number(R.total_cost)/Number(R.quantity):void 0),total_cost:R.total_cost||void 0,batch_code:R.batch_code||void 0,expiry_date:R.expiry_date||void 0,barcode:R.barcode||void 0}))})}else a("Não foi possível interpretar itens do XML. Preencha manualmente.")},M=B.useMemo(()=>[{header:"Nota",accessorKey:"invoice_number",cell:({row:C})=>C.original.invoice_number||"—"},{header:"Fornecedor",accessorKey:"supplier_id",cell:({row:C})=>C.original.suppliers?.nome||"—"},{header:"Data",accessorKey:"issue_date",cell:({row:C})=>C.original.issue_date||"—"},{header:"Itens",accessorKey:"items",cell:({row:C})=>C.original.purchase_invoice_items?.length||0}],[P]);return b?m.jsxs("div",{className:"space-y-6",children:[m.jsx(Oe,{title:"Compras e Notas de Entrada",subtitle:"Registre notas fiscais, lote e validade para abastecer o estoque automaticamente.",actions:m.jsxs("button",{className:"inline-flex items-center gap-2 rounded-md bg-emerald-600 px-4 py-2 text-sm text-white",onClick:()=>v(!0),children:[m.jsx(ue,{className:"h-4 w-4"})," Nova entrada"]})}),f?m.jsx("div",{className:"text-sm text-gray-500",children:"Carregando notas..."}):m.jsx(Le,{data:P,columns:M}),p?m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",children:m.jsxs("div",{className:"w-full max-w-4xl rounded-2xl bg-white p-6 shadow-xl",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Nova nota de entrada"}),m.jsx("p",{className:"text-sm text-gray-500",children:"Preencha manualmente ou importe XML da NF-e."})]}),m.jsx("button",{className:"rounded-full p-2 hover:bg-gray-100",onClick:()=>v(!1),children:m.jsx($e,{className:"h-4 w-4"})})]}),m.jsxs("form",{onSubmit:d(O),className:"mt-6 space-y-6",children:[m.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[m.jsxs("div",{children:[m.jsx("label",{className:"text-xs font-medium text-gray-600",children:"Fornecedor"}),m.jsxs("select",{className:"mt-1 w-full rounded-md border border-gray-200 px-3 py-2 text-sm",...o("supplier_id"),children:[m.jsx("option",{value:"",children:"Selecione"}),r.map(C=>m.jsx("option",{value:C.id,children:C.nome},C.id))]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-xs font-medium text-gray-600",children:"Número da nota"}),m.jsx("input",{className:"mt-1 w-full rounded-md border border-gray-200 px-3 py-2 text-sm",...o("invoice_number")})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-xs font-medium text-gray-600",children:"Data de emissão"}),m.jsx("input",{type:"date",className:"mt-1 w-full rounded-md border border-gray-200 px-3 py-2 text-sm",...o("issue_date")})]})]}),m.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[m.jsxs("div",{children:[m.jsx("label",{className:"text-xs font-medium text-gray-600",children:"Anexar PDF/Imagem"}),m.jsx("input",{type:"file",className:"mt-1 w-full text-sm",onChange:C=>F(C.target.files?.[0]||null)})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-xs font-medium text-gray-600",children:"Importar XML NF-e"}),m.jsx("input",{type:"file",accept:".xml",className:"mt-1 w-full text-sm",onChange:C=>{const j=C.target.files?.[0];j&&X(j)}}),N?m.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Parser: ",N]}):null,n?m.jsx("p",{className:"mt-1 text-xs text-rose-500",children:n}):null]})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"Itens da nota"}),m.jsxs("button",{type:"button",className:"inline-flex items-center gap-2 rounded-md border border-gray-200 px-3 py-1 text-xs",onClick:()=>y({item_id:"",quantity:1}),children:[m.jsx(ue,{className:"h-3 w-3"})," Adicionar item"]})]}),m.jsx("div",{className:"mt-3 space-y-3",children:I.map((C,j)=>m.jsxs("div",{className:"grid gap-3 rounded-lg border border-gray-200 p-3 md:grid-cols-6",children:[m.jsxs("div",{className:"md:col-span-2",children:[m.jsx("label",{className:"text-xs text-gray-600",children:"Item"}),m.jsx("input",{type:"hidden",...o(`items.${j}.item_id`)}),m.jsx(Re,{items:A,value:C.item_id,onChange:L=>c(`items.${j}.item_id`,L)})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-xs text-gray-600",children:"Qtd"}),m.jsx("input",{type:"number",step:"0.01",className:"mt-1 w-full rounded-md border border-gray-200 px-3 py-2 text-sm",...o(`items.${j}.quantity`,{valueAsNumber:!0})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-xs text-gray-600",children:"Custo unitário"}),m.jsx("input",{type:"number",step:"0.01",className:"mt-1 w-full rounded-md border border-gray-200 px-3 py-2 text-sm",...o(`items.${j}.unit_cost`,{valueAsNumber:!0})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-xs text-gray-600",children:"Lote"}),m.jsx("input",{className:"mt-1 w-full rounded-md border border-gray-200 px-3 py-2 text-sm",...o(`items.${j}.batch_code`)})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-xs text-gray-600",children:"Validade"}),m.jsx("input",{type:"date",className:"mt-1 w-full rounded-md border border-gray-200 px-3 py-2 text-sm",...o(`items.${j}.expiry_date`)})]}),m.jsxs("div",{className:"md:col-span-5",children:[m.jsx("label",{className:"text-xs text-gray-600",children:"Descrição"}),m.jsx("input",{className:"mt-1 w-full rounded-md border border-gray-200 px-3 py-2 text-sm",...o(`items.${j}.description`)})]}),m.jsx("div",{className:"flex items-end",children:m.jsx("button",{type:"button",className:"rounded-md border border-red-200 px-3 py-2 text-xs text-red-600",onClick:()=>h(j),children:"Remover"})})]},C.id))})]}),m.jsxs("div",{className:"flex justify-end gap-2",children:[m.jsx("button",{type:"button",className:"rounded-md border border-gray-200 px-4 py-2 text-sm",onClick:()=>v(!1),children:"Cancelar"}),m.jsx("button",{type:"submit",className:"rounded-md bg-emerald-600 px-4 py-2 text-sm text-white",children:"Salvar entrada"})]})]})]})}):null]}):null};export{ot as default};
