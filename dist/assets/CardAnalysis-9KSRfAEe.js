import{u as he,r as h,j as e,f as ge,g as ye,s as Q}from"./index-Bi_Yktdj.js";import{f,b as N,a as fe}from"./utils-Bgz2xRk4.js";import{R as ve}from"./refresh-cw-BVgxwze2.js";import{C as W}from"./calendar-9FKwlTHs.js";import{F as Z}from"./filter-CCOb0g5A.js";import{R as ee,n as ae,X as te,Y as re,T as se,p as ne,B as je}from"./generateCategoricalChart-56Zk5LGv.js";import{A as Ne,a as oe}from"./AreaChart-CKPRQOAw.js";import{D as z}from"./download-GFpxFQdG.js";import{A as ce}from"./arrow-up-down-CjckQ9lV.js";import{B as _e}from"./BarChart-6xi2Ro1t.js";const De=(t,l)=>{if(!t)return"";const o=new Date(t);return isNaN(o.getTime())?t:(o.setDate(o.getDate()+l),o.toISOString().split("T")[0])},ke=(t,l)=>{if(!t)return"";const o=new Date(t);if(isNaN(o.getTime()))return t;let i=0;for(;i<l;){o.setDate(o.getDate()+1);const m=o.getDay();m!==0&&m!==6&&(i+=1)}return o.toISOString().split("T")[0]},B=t=>{const l=new Date,o=l.toISOString().split("T")[0],i=new Date(l);switch(t){case"dia":break;case"semana":i.setDate(l.getDate()-7);break;case"quinzenal":i.setDate(l.getDate()-15);break;case"mes":i.setMonth(l.getMonth()-1);break;case"ano":i.setFullYear(l.getFullYear()-1);break}return{start:i.toISOString().split("T")[0],end:o}},qe=t=>{if(!t)return[];try{const l=Array.isArray(t)?t:typeof t=="string"?JSON.parse(t):[];return Array.isArray(l)?l.map(o=>typeof o=="string"?{vencimento:o}:!o||typeof o!="object"?null:{vencimento:o.vencimento||o.due_date||o.data||o.date||""}).filter(Boolean):[]}catch{return[]}},de=t=>qe(t.recebimento_parcelas).map(l=>l.vencimento).filter(Boolean),L=(t,l=1)=>{const o=t?.data_competencia;if(!o)return"";const i=de(t);if(i.length)return i[l-1]||i[0];const m=(t.forma_pagamento||"").toLowerCase(),v=t.data_recebimento||o;if(m.includes("boleto")||m.includes("cheque"))return v;if(m.includes("débito")||m.includes("debito"))return t.data_recebimento?v:ke(v,1);if(m.includes("crédito")||m.includes("credito")||m.includes("convenio")||m.includes("convênio")){const y=t.data_recebimento?30*(l-1):30*l;return De(v,y)}return v},me=t=>{const l=new Date(t);return isNaN(l.getTime())?null:l},ie=(t,l)=>{const o=me(t);if(!o)return Number.POSITIVE_INFINITY;const i=new Date(o);switch(i.setHours(0,0,0,0),l){case"semana":{const m=(i.getDay()+6)%7;i.setDate(i.getDate()-m);break}case"quinzenal":i.setDate(i.getDate()<=15?1:16);break;case"mes":i.setDate(1);break;case"ano":i.setMonth(0,1);break}return i.getTime()},le=(t,l)=>{const o=me(t);if(!o)return t;const i=o.getFullYear(),m=`${o.getMonth()+1}`.padStart(2,"0"),v=`${o.getDate()}`.padStart(2,"0"),y=["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],$=y[o.getMonth()]?`${y[o.getMonth()]}/${i}`:`${m}/${i}`;switch(l){case"dia":return`${i}-${m}-${v}`;case"semana":{const u=new Date(o.getTime()),P=(o.getDay()+6)%7;u.setDate(o.getDate()-P+3);const b=new Date(u.getFullYear(),0,4);return`Semana ${1+Math.round(((u.getTime()-b.getTime())/864e5-3)/7)}/${i}`}case"quinzenal":return`${$} - ${o.getDate()<=15?"1ª quinzena":"2ª quinzena"}`;case"mes":return $;case"ano":return`${i}`;default:return t}},M=t=>t?t.includes("Semana")||t.includes("quinzena")?t:/^\d{4}-\d{2}-\d{2}$/.test(t)?N(t):/^\d{4}-\d{2}$/.test(t)?fe(t):t:"",we=t=>{if(!t)return null;const l=t.match(/NSU\s*:?\s*([^|]+)/i);return l&&l[1].trim()||null},$e=t=>Number.isFinite(t)?new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(t)+"%":"0,00%",R=t=>Number.isFinite(t)?new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(t):"0,00",Re=()=>{const{clinicId:t,isAdmin:l,selectedClinicId:o}=he(),i=(l?o:t)||t||null,[m,v]=h.useState([]),[y,$]=h.useState("mes"),[u,P]=h.useState(B("mes").start),[b,T]=h.useState(B("mes").end),[_,V]=h.useState("vendas"),[E,ue]=h.useState({column:"data_competencia",direction:"asc"}),[K,xe]=h.useState({column:"data_recebimento",direction:"asc"}),[I,O]=h.useState(null),j=h.useMemo(()=>new Date().toISOString().split("T")[0],[]),U=async()=>{try{O(null);let a="id, data_competencia, data_recebimento, recebimento_parcelas, valor_bruto, valor_liquido, valor, forma_pagamento, paciente, parcelas, bandeira, nsu, observacoes",r=Q.from("revenues").select(a);i&&(r=r.eq("clinic_id",i)),_==="vendas"&&u&&(r=r.gte("data_competencia",u)),b&&(r=r.lte("data_competencia",b));let{data:n,error:s}=await r;if(s){const d=`${s.message}`.toLowerCase();(d.includes("nsu")||d.includes("recebimento_parcelas"))&&(a="id, data_competencia, data_recebimento, valor_bruto, valor_liquido, valor, forma_pagamento, paciente, parcelas, bandeira, observacoes",r=Q.from("revenues").select(a),i&&(r=r.eq("clinic_id",i)),_==="vendas"&&u&&(r=r.gte("data_competencia",u)),b&&(r=r.lte("data_competencia",b)),{data:n,error:s}=await r)}if(s)throw s;const c=(n||[]).map(d=>({...d,nsu:d.nsu||we(d.observacoes)}));v(c)}catch(a){console.error(a),O(a?.message||"Erro ao carregar dados"),v([])}};h.useEffect(()=>{const{start:a,end:r}=B(y);P(a),T(r)},[y]),h.useEffect(()=>{U()},[u,b,_,i]);const Y=a=>{const r=[];return a.forEach(n=>{if(!n.data_competencia)return;const s=de(n),c=Math.max(1,s.length||Number(n.parcelas||1)),d=Number(n.valor_bruto??n.valor??n.valor_liquido??0),p=Number(n.valor_liquido??n.valor??n.valor_bruto??0);for(let g=1;g<=c;g++){const D=d/c,x=p/c,A=n.data_competencia,w=s[g-1]||L(n,g)||A;r.push({...n,parcelaNumero:g,parcelaTotal:c,valorParcela:D,valorParcelaLiquido:x,data_recebimento:w,data_venda:A})}}),r},J=(a,r)=>{const n=r.direction==="asc"?1:-1;return[...a].sort((s,c)=>{const d=s[r.column]??"",p=c[r.column]??"";return d<p?-1*n:d>p?1*n:0})},q=h.useMemo(()=>m.filter(a=>a.data_competencia>=u&&a.data_competencia<=b),[m,u,b]),k=h.useMemo(()=>Y(m),[m]),pe=h.useMemo(()=>{const a=new Map;return q.forEach(r=>{const n=le(r.data_competencia,y),s=ie(r.data_competencia,y),c=a.get(n)||{bucket:n,bruto:0,liquido:0,sortKey:s};c.bruto+=Number(r.valor_bruto??r.valor??0),c.liquido+=Number(r.valor_liquido??r.valor??0),c.sortKey=Math.min(c.sortKey,s),a.set(n,c)}),Array.from(a.values()).sort((r,n)=>r.sortKey-n.sortKey)},[q,y]),be=h.useMemo(()=>{const a=new Map,r=u>j?u:j;return k.filter(s=>s.data_recebimento&&s.data_recebimento>=r&&s.data_recebimento<=b).forEach(s=>{const c=s.data_recebimento,d=le(c,y),p=ie(c,y),g=a.get(d)||{bucket:d,liquido:0,sortKey:p};g.liquido+=Number(s.valorParcelaLiquido||s.valor_liquido||0),g.sortKey=Math.min(g.sortKey,p),a.set(d,g)}),Array.from(a.values()).sort((s,c)=>s.sortKey-c.sortKey)},[k,u,b,j,y]),C=h.useMemo(()=>{const a=m.filter(r=>r.data_competencia>=u&&r.data_competencia<=b);return J(Y(a),E)},[m,u,b,E]),S=h.useMemo(()=>{const a=u>j?u:j,r=k.filter(n=>n.data_recebimento&&n.data_recebimento>=a&&n.data_recebimento<=b);return J(r,K)},[k,u,b,K,j]),G=(a,r)=>{r==="vendas"?ue(n=>({column:a,direction:n.column===a&&n.direction==="asc"?"desc":"asc"})):xe(n=>({column:a,direction:n.column===a&&n.direction==="asc"?"desc":"asc"}))},X=(a,r)=>{const n=["Paciente","Data venda","Data recebimento","Parcela","Valor venda","Valor parcela","Parcela líquido","Forma pgto","NSU","Bandeira"],s=x=>{if(x==null)return"";const w=String(x).replace(/"/g,'""');return/[;\n\r"]/.test(w)?`"${w}"`:w},d="\uFEFF"+[n.map(s).join(";"),...a.map(x=>[s(x.paciente||"-"),s(N(x.data_venda||x.data_competencia)),s(N(x.data_recebimento||L(x))),s(`${x.parcelaNumero||1}/${x.parcelaTotal||1}`),s(R(Number(x.valor_bruto||x.valor||x.valor_liquido||0))),s(R(Number(x.valorParcela||0))),s(R(Number(x.valorParcelaLiquido||0))),s(x.forma_pagamento||"-"),s(x.nsu||"-"),s(x.bandeira||"-")].join(";"))].join(`\r
`),p=new Blob([d],{type:"text/csv;charset=utf-8;"}),g=URL.createObjectURL(p),D=document.createElement("a");D.href=g,D.setAttribute("download",`${r}.csv`),document.body.appendChild(D),D.click(),document.body.removeChild(D)},H=(a,r)=>{const n=a.map(c=>`
      <tr>
        <td>${c.paciente||"-"}</td>
        <td>${N(c.data_venda||c.data_competencia)}</td>
        <td>${N(c.data_recebimento||L(c))}</td>
        <td>${c.parcelaNumero||1}/${c.parcelaTotal||1}</td>
        <td>${f(Number(c.valor_bruto||c.valor||c.valor_liquido||0))}</td>
        <td>${f(Number(c.valorParcela||0))}</td>
        <td>${f(Number(c.valorParcelaLiquido||0))}</td>
        <td>${c.forma_pagamento||"-"}</td>
        <td>${c.nsu||"-"}</td>
        <td>${c.bandeira||"-"}</td>
      </tr>
    `).join(""),s=window.open("","_blank");s&&(s.document.write(`
      <html>
        <head>
          <title>${r}</title>
          <style>
            body { font-family: Arial, sans-serif; padding: 16px; }
            table { width: 100%; border-collapse: collapse; }
            th, td { border: 1px solid #ddd; padding: 8px; font-size: 12px; }
            th { background: #f3f4f6; text-align: left; }
          </style>
        </head>
        <body>
          <h2>${r}</h2>
          <table>
            <thead>
              <tr>
                <th>Paciente</th><th>Data venda</th><th>Data receb.</th><th>Parcela</th><th>Valor venda</th><th>Valor parcela</th><th>Parcela líquido</th><th>Forma pgto</th><th>NSU</th><th>Bandeira</th>
              </tr>
            </thead>
            <tbody>${n}</tbody>
          </table>
        </body>
      </html>
    `),s.document.close(),s.print())},F=h.useMemo(()=>{const a=q.reduce((d,p)=>d+Number(p.valor_bruto??p.valor??0),0),r=q.reduce((d,p)=>d+Number(p.valor_liquido??p.valor??0),0),n=u>j?u:j,s=k.reduce((d,p)=>{const g=p.data_recebimento;return g&&g>=n&&g<=b?d+Number(p.valorParcelaLiquido||p.valor_liquido||0):d},0),c=a>0?(1-r/a)*100:0;return{vendidoBruto:a,vendidoLiquido:r,receberPeriodo:s,taxaPercentual:c}},[q,k,u,b,j]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Análise de Cartão"}),e.jsx("p",{className:"text-gray-500",children:"Compare vendas e recebíveis considerando taxas e prazos de cartão."})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[["dia","semana","quinzenal","mes","ano"].map(a=>e.jsx("button",{onClick:()=>$(a),className:`px-3 py-2 rounded-lg text-sm border ${y===a?"bg-brand-600 text-white border-brand-600":"bg-white text-gray-700 border-gray-200"}`,children:a[0].toUpperCase()+a.slice(1)},a)),e.jsxs("button",{onClick:U,className:"px-3 py-2 border border-gray-200 rounded-lg text-gray-700 flex items-center gap-2",title:"Atualiza os dados do período",children:[e.jsx(ve,{size:16})," Atualizar"]})]})]}),e.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4 justify-between",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:e.jsx(W,{size:16})}),e.jsx("input",{type:"date",value:u,onChange:a=>P(a.target.value),className:"pl-9 pr-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-brand-500"})]}),e.jsx("span",{className:"text-gray-400",children:"até"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:e.jsx(W,{size:16})}),e.jsx("input",{type:"date",value:b,onChange:a=>T(a.target.value),className:"pl-9 pr-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-brand-500"})]})]}),e.jsxs("div",{className:"flex gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Vendido (bruto)"}),e.jsx("p",{className:"text-lg font-semibold text-gray-800",children:f(F.vendidoBruto)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Vendido (líquido c/ taxa)"}),e.jsx("p",{className:"text-lg font-semibold text-gray-800",children:f(F.vendidoLiquido)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"A receber no período"}),e.jsx("p",{className:"text-lg font-semibold text-emerald-700",children:f(F.receberPeriodo)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Taxa média cobrada"}),e.jsx("p",{className:"text-lg font-semibold text-gray-800",children:$e(F.taxaPercentual)})]})]})]})}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100",children:[I&&e.jsxs("div",{className:"mb-3 p-3 rounded-lg bg-red-50 text-red-700 text-sm",children:["Erro ao carregar dados: ",I]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-4",children:[e.jsxs("button",{className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm border ${_==="vendas"?"bg-brand-600 text-white border-brand-600":"bg-white text-gray-700 border-gray-200"}`,onClick:()=>V("vendas"),children:[e.jsx(ge,{size:16})," Vendas"]}),e.jsxs("button",{className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm border ${_==="recebiveis"?"bg-brand-600 text-white border-brand-600":"bg-white text-gray-700 border-gray-200"}`,onClick:()=>V("recebiveis"),children:[e.jsx(ye,{size:16})," Recebíveis"]})]}),_==="vendas"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 text-gray-700 font-semibold",children:[e.jsx(Z,{size:16})," Vendas por data (bruto x líquido)"]}),e.jsx("div",{className:"h-72",children:e.jsx(ee,{width:"100%",height:"100%",children:e.jsxs(Ne,{data:pe,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"gradBruto",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#64748b",stopOpacity:.35}),e.jsx("stop",{offset:"95%",stopColor:"#64748b",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"gradLiquido",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#0ea5e9",stopOpacity:.4}),e.jsx("stop",{offset:"95%",stopColor:"#0ea5e9",stopOpacity:0})]})]}),e.jsx(ae,{strokeDasharray:"3 3",vertical:!1}),e.jsx(te,{dataKey:"bucket",tickFormatter:M}),e.jsx(re,{}),e.jsx(se,{formatter:a=>f(a),labelFormatter:M}),e.jsx(ne,{}),e.jsx(oe,{type:"monotone",dataKey:"bruto",stroke:"#64748b",fill:"url(#gradBruto)",name:"Bruto"}),e.jsx(oe,{type:"monotone",dataKey:"liquido",stroke:"#0ea5e9",fill:"url(#gradLiquido)",name:"Líquido (c/ taxa)"})]})})}),e.jsxs("div",{className:"flex justify-between items-center mt-3",children:[e.jsx("span",{className:"text-sm text-gray-600 flex items-center gap-2 font-semibold",children:"Detalhe de vendas"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>X(C,"onefinc-vendas"),className:"flex items-center gap-1 px-3 py-1 text-xs border rounded-lg text-gray-700 hover:bg-gray-50",children:[e.jsx(z,{size:14})," CSV"]}),e.jsxs("button",{onClick:()=>H(C,"Vendas"),className:"flex items-center gap-1 px-3 py-1 text-xs border rounded-lg text-gray-700 hover:bg-gray-50",children:[e.jsx(z,{size:14})," PDF"]})]})]}),e.jsx("div",{className:"mt-2 max-h-[420px] overflow-auto",children:e.jsxs("table",{className:"min-w-[1100px] w-full text-sm border-t border-gray-100 table-fixed whitespace-nowrap",children:[e.jsx("thead",{children:e.jsx("tr",{className:"text-left text-gray-500",children:[{key:"paciente",label:"Paciente"},{key:"data_venda",label:"Data venda"},{key:"data_recebimento",label:"Data receb."},{key:"parcelaNumero",label:"Parcela"},{key:"valor_bruto",label:"Valor venda"},{key:"valorParcela",label:"Valor parcela"},{key:"valorParcelaLiquido",label:"Parcela líquido"},{key:"forma_pagamento",label:"Forma pgto"},{key:"nsu",label:"NSU"},{key:"bandeira",label:"Bandeira"}].map(a=>e.jsx("th",{className:"py-2 pr-3 font-medium cursor-pointer select-none",onClick:()=>G(a.key,"vendas"),children:e.jsxs("span",{className:"inline-flex items-center gap-1",children:[a.label," ",e.jsx(ce,{size:12,className:"text-gray-400"})]})},a.key))})}),e.jsxs("tbody",{children:[C.map(a=>e.jsxs("tr",{className:"border-t border-gray-100",children:[e.jsx("td",{className:"py-2 pr-3 text-gray-800 truncate max-w-[180px]",title:a.paciente||"-",children:a.paciente||"-"}),e.jsx("td",{className:"py-2 pr-3 text-gray-600 w-32",children:N(a.data_venda||a.data_competencia)}),e.jsx("td",{className:"py-2 pr-3 text-gray-600 w-32",children:N(a.data_recebimento)}),e.jsx("td",{className:"py-2 pr-3 text-gray-600 w-28",children:`${a.parcelaNumero||1} de ${a.parcelaTotal||1}`}),e.jsx("td",{className:"py-2 pr-3 text-gray-900 font-semibold w-32",children:f(Number(a.valor_bruto||a.valor||0))}),e.jsx("td",{className:"py-2 pr-3 text-gray-900 w-32",children:f(Number(a.valorParcela||0))}),e.jsx("td",{className:"py-2 pr-3 text-gray-900 w-40",children:f(Number(a.valorParcelaLiquido||0))}),e.jsx("td",{className:"py-2 pr-3 text-gray-600 truncate max-w-[170px]",title:a.forma_pagamento||"-",children:a.forma_pagamento||"-"}),e.jsx("td",{className:"py-2 pr-3 text-gray-600 truncate max-w-[140px]",title:a.nsu||"-",children:a.nsu||"-"}),e.jsx("td",{className:"py-2 pr-3 text-gray-600 truncate max-w-[140px]",title:a.bandeira||"-",children:a.bandeira||"-"})]},`${a.id}-${a.parcelaNumero}`)),C.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"py-3 text-center text-gray-400",children:"Nenhum registro no período selecionado."})})]})]})})]}),_==="recebiveis"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 text-gray-700 font-semibold",children:[e.jsx(Z,{size:16})," Recebíveis futuros (líquido)"]}),e.jsxs("p",{className:"text-xs text-gray-500 mb-3",children:["Mostrando apenas recebíveis a partir de hoje (",N(j),") para facilitar a previsão de entradas futuras."]}),e.jsx("div",{className:"h-72",children:e.jsx(ee,{width:"100%",height:"100%",children:e.jsxs(_e,{data:be,children:[e.jsx(ae,{strokeDasharray:"3 3"}),e.jsx(te,{dataKey:"bucket",tickFormatter:M}),e.jsx(re,{}),e.jsx(se,{formatter:a=>f(a),labelFormatter:M}),e.jsx(ne,{}),e.jsx(je,{dataKey:"liquido",fill:"#22c55e",name:"Líquido a receber",radius:[6,6,0,0]})]})})}),e.jsxs("div",{className:"flex justify-between items-center mt-3",children:[e.jsx("span",{className:"text-sm text-gray-600 flex items-center gap-2 font-semibold",children:"Detalhe de recebíveis"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>X(S,"onefinc-recebiveis"),className:"flex items-center gap-1 px-3 py-1 text-xs border rounded-lg text-gray-700 hover:bg-gray-50",children:[e.jsx(z,{size:14})," CSV"]}),e.jsxs("button",{onClick:()=>H(S,"Recebiveis"),className:"flex items-center gap-1 px-3 py-1 text-xs border rounded-lg text-gray-700 hover:bg-gray-50",children:[e.jsx(z,{size:14})," PDF"]})]})]}),e.jsx("div",{className:"mt-2 max-h-[420px] overflow-auto",children:e.jsxs("table",{className:"min-w-[1100px] w-full text-sm border-t border-gray-100 table-fixed whitespace-nowrap",children:[e.jsx("thead",{children:e.jsx("tr",{className:"text-left text-gray-500",children:[{key:"paciente",label:"Paciente"},{key:"data_venda",label:"Data venda"},{key:"data_recebimento",label:"Data receb."},{key:"parcelaNumero",label:"Parcela"},{key:"valor_bruto",label:"Valor venda"},{key:"valorParcela",label:"Valor parcela"},{key:"valorParcelaLiquido",label:"Parcela líquido"},{key:"forma_pagamento",label:"Forma pgto"},{key:"nsu",label:"NSU"},{key:"bandeira",label:"Bandeira"}].map(a=>e.jsx("th",{className:"py-2 pr-3 font-medium cursor-pointer select-none",onClick:()=>G(a.key,"recebiveis"),children:e.jsxs("span",{className:"inline-flex items-center gap-1",children:[a.label," ",e.jsx(ce,{size:12,className:"text-gray-400"})]})},a.key))})}),e.jsxs("tbody",{children:[S.map(a=>e.jsxs("tr",{className:"border-t border-gray-100",children:[e.jsx("td",{className:"py-2 pr-3 text-gray-800 truncate max-w-[180px]",title:a.paciente||"-",children:a.paciente||"-"}),e.jsx("td",{className:"py-2 pr-3 text-gray-600 w-32",children:N(a.data_venda||a.data_competencia)}),e.jsx("td",{className:"py-2 pr-3 text-gray-600 w-32",children:N(a.data_recebimento)}),e.jsx("td",{className:"py-2 pr-3 text-gray-600 w-28",children:`${a.parcelaNumero||1} de ${a.parcelaTotal||1}`}),e.jsx("td",{className:"py-2 pr-3 text-gray-900 font-semibold w-32",children:f(Number(a.valor_bruto||a.valor||0))}),e.jsx("td",{className:"py-2 pr-3 text-gray-900 w-32",children:f(Number(a.valorParcela||0))}),e.jsx("td",{className:"py-2 pr-3 text-gray-900 w-40",children:f(Number(a.valorParcelaLiquido||0))}),e.jsx("td",{className:"py-2 pr-3 text-gray-600 truncate max-w-[170px]",title:a.forma_pagamento||"-",children:a.forma_pagamento||"-"}),e.jsx("td",{className:"py-2 pr-3 text-gray-600 truncate max-w-[140px]",title:a.nsu||"-",children:a.nsu||"-"}),e.jsx("td",{className:"py-2 pr-3 text-gray-600 truncate max-w-[140px]",title:a.bandeira||"-",children:a.bandeira||"-"})]},`${a.id}-${a.parcelaNumero}`)),S.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"py-3 text-center text-gray-400",children:"Nenhum recebível no período selecionado."})})]})]})})]})]})]})};export{Re as default};
