import{u as p,r,j as e}from"./index-HcuLVkXM.js";import{S as m,r as x,l as y}from"./service-C61pE4fL.js";import{A}from"./AlertsPanel-PKjpcU2n.js";const b=()=>{const{effectiveClinicId:o,session:n}=p(),t=o,[l,c]=r.useState([]),[d,i]=r.useState(!0),a=async()=>{if(t){i(!0);try{const s=await y(t);c(s)}finally{i(!1)}}};r.useEffect(()=>{a()},[t]);const u=async()=>{!t||!n||(await fetch("https://kevzqjffwbcjxvoebfll.supabase.co/functions/v1/inventory-alerts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n.access_token}`},body:JSON.stringify({clinic_id:t})}),await a())};return t?e.jsxs("div",{className:"space-y-6",children:[e.jsx(m,{title:"Central de Alertas",subtitle:"Baixo estoque, validade, perdas e variações de preço em tempo real.",actions:e.jsx("button",{className:"rounded-md border border-gray-200 px-4 py-2 text-sm",onClick:u,children:"Atualizar alertas"})}),d?e.jsx("div",{className:"text-sm text-gray-500",children:"Carregando alertas..."}):e.jsx(A,{alerts:l,onUpdateStatus:async(s,f)=>{await x(s,f),await a()}})]}):null};export{b as default};
