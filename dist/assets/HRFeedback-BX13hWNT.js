import{u as ne,r as i,j as e,C as de,f as ie,s as h}from"./index-HcuLVkXM.js";import{b as $}from"./utils-C6qNh0Lg.js";import{R as ce}from"./RichTextEditor-C3h-x9cI.js";import{u as Q}from"./useModalControls-BiWM_r1l.js";import{P as oe}from"./plus-DDz1DOCh.js";import{S as me}from"./search-C1xIXvIu.js";import{D as Y}from"./download-CcofxccE.js";import{E as xe}from"./eye-DWJKAkmY.js";import{P as pe}from"./pencil-MoagDD9-.js";import{T as ue}from"./trash-2-FGsD9cgR.js";const G=["Positivo","Construtivo","Corretivo","Outros"],J=l=>{const b=l.trim().replace(/\s+/g," ");if(!b)return"";const p=b.split(" ");return p.length===1?p[0].slice(0,2).toUpperCase():`${p[0][0]||""}${p[p.length-1][0]||""}`.toUpperCase()},be=l=>l==null?"bg-gray-100 text-gray-400":l>=9?"bg-emerald-100 text-emerald-700":l>=7?"bg-lime-100 text-lime-700":l>=5?"bg-amber-100 text-amber-700":"bg-rose-100 text-rose-700",ge=({options:l,value:b,onChange:p,placeholder:E="Selecione"})=>{const[D,k]=i.useState(!1),y=i.useRef(null),u=l.filter(r=>b.includes(r.value));return i.useEffect(()=>{const r=v=>{y.current&&(y.current.contains(v.target)||k(!1))};return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[]),e.jsxs("div",{className:"relative",ref:y,children:[e.jsxs("button",{type:"button",onClick:()=>k(r=>!r),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-left bg-white focus:ring-brand-500 outline-none",children:[u.length===0&&e.jsx("span",{className:"text-gray-400",children:E}),u.length>0&&e.jsxs("span",{className:"text-gray-700",children:[u.slice(0,2).map(r=>r.label).join(", "),u.length>2?` +${u.length-2}`:""]})]}),D&&e.jsxs("div",{className:"absolute z-20 mt-2 w-full max-h-64 overflow-auto rounded-xl border border-gray-200 bg-white shadow-lg",children:[l.map(r=>{const v=b.includes(r.value);return e.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 text-sm hover:bg-gray-50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:v,onChange:P=>{P.target.checked?p([...b,r.value]):p(b.filter(F=>F!==r.value))}}),e.jsxs("span",{className:"flex items-center gap-2",children:[r.avatar?e.jsx("img",{src:r.avatar,alt:r.label,className:"w-7 h-7 rounded-full object-cover"}):e.jsx("span",{className:"w-7 h-7 rounded-full bg-brand-50 text-brand-600 flex items-center justify-center text-xs font-semibold",children:J(r.label)}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium text-gray-800",children:r.label}),r.subLabel&&e.jsx("span",{className:"text-[11px] text-gray-400",children:r.subLabel})]})]})]},r.value)}),l.length===0&&e.jsx("p",{className:"px-3 py-3 text-sm text-gray-400",children:"Nenhum colaborador disponível."})]})]})},Se=()=>{const{effectiveClinicId:l,clinicUser:b,user:p,isSystemAdmin:E,role:D}=ne(),[k,y]=i.useState([]),[u,r]=i.useState([]),[v,P]=i.useState([]),[F,z]=i.useState(!0),[T,_]=i.useState(!1),[w,C]=i.useState(null),[U,A]=i.useState(!1),[q,f]=i.useState(null),[o,S]=i.useState(null),W=Q({isOpen:T,onClose:()=>{_(!1),C(null)}}),X=Q({isOpen:!!o,onClose:()=>S(null)}),[d,N]=i.useState({departmentId:"",leaderId:"",type:"",dateStart:"",dateEnd:"",search:""}),[s,m]=i.useState({subjectId:"",departmentId:"",leaderId:"",type:"",feedbackDate:"",scorePersonal:"",scoreManagement:"",result:"",description:"",participants:[]}),B=a=>{if(a==null)return"";const t=String(a);return/[";\n]/.test(t)?`"${t.replace(/"/g,'""')}"`:t},O=a=>{const t=["Nome","Departamento","Data","Tipo","Resultado","Nota pessoal","Nota gestão","Líder"],x=M.map(n=>[n.subject?.name||n.subject?.email||"",n.department?.name||"",$(n.feedback_date),n.feedback_type||"",n.result||"",n.score_personal??"",n.score_management??"",n.leader?.name||""]);if(a==="csv"){const j=`\uFEFF${[t.map(B).join(";"),...x.map(le=>le.map(B).join(";"))].join(`
`)}`,L=new Blob([j],{type:"text/csv;charset=utf-8;"}),re=URL.createObjectURL(L),I=document.createElement("a");I.href=re,I.setAttribute("download","feedbacks.csv"),document.body.appendChild(I),I.click(),document.body.removeChild(I);return}const g=x.map(n=>`<tr>${n.map(j=>`<td style="padding:6px;border:1px solid #ddd;font-size:12px;">${j}</td>`).join("")}</tr>`).join(""),c=window.open("","_blank");c&&(c.document.write(`
      <html><head><title>Relatório de feedbacks</title>
      <style>table{border-collapse:collapse;width:100%;font-family:Arial;}th,td{border:1px solid #ddd;padding:6px;font-size:12px;}th{background:#f3f4f6;text-align:left;}</style>
      </head><body>
      <h3>Relatório de feedbacks (filtrado)</h3>
      <table>
        <thead><tr>${t.map(n=>`<th>${n}</th>`).join("")}</tr></thead>
        <tbody>${g}</tbody>
      </table>
      </body></html>
    `),c.document.close(),c.print())},Z=i.useMemo(()=>u.map(a=>({value:a.id,label:a.name||a.email,subLabel:a.email,avatar:a.avatar_url})),[u]),H=i.useMemo(()=>v,[v]),M=i.useMemo(()=>k.filter(a=>{if(d.departmentId&&a.department_id!==d.departmentId||d.leaderId&&a.leader_id!==d.leaderId||d.type&&a.feedback_type!==d.type||d.dateStart&&(!a.feedback_date||a.feedback_date<d.dateStart)||d.dateEnd&&(!a.feedback_date||a.feedback_date>d.dateEnd))return!1;if(d.search){const t=d.search.toLowerCase();if(![a.subject?.name,a.subject?.email,a.department?.name,a.feedback_type].filter(Boolean).join(" ").toLowerCase().includes(t))return!1}return!0}),[k,d]),V=a=>E||a.created_by&&a.created_by===p?.id?!0:D==="admin"||D==="owner",ee=async()=>{if(!l){r([]);return}const{data:a}=await h.from("clinic_users").select("id, name, email, avatar_url, user_id, ativo").eq("clinic_id",l).eq("ativo",!0).order("name",{ascending:!0});r(a||[])},ae=async()=>{if(!l){P([]);return}const{data:a}=await h.from("hr_departments").select("id, name").eq("clinic_id",l).order("name",{ascending:!0});P(a||[])},R=async()=>{if(!l){y([]),z(!1);return}z(!0);const{data:a,error:t}=await h.from("hr_feedbacks").select(`
        *,
        subject:clinic_users!hr_feedbacks_subject_user_id_fkey (id, name, email, avatar_url),
        leader:clinic_users!hr_feedbacks_leader_id_fkey (id, name, email, avatar_url),
        department:hr_departments!hr_feedbacks_department_id_fkey (id, name),
        participants:hr_feedback_participants!hr_feedback_participants_feedback_id_fkey (
          clinic_user_id,
          clinic_users (id, name, email, avatar_url)
        )
      `).eq("clinic_id",l).order("feedback_date",{ascending:!1}).order("created_at",{ascending:!1});if(!t&&a){const x=b?.id,g=E?a:a.filter(c=>{if(!x)return!0;const n=(c.participants||[]).some(L=>L.clinic_user_id===x),j=c.created_by&&c.created_by===p?.id;return n||j});y(g)}z(!1)};i.useEffect(()=>{ee(),ae()},[l]),i.useEffect(()=>{R()},[l]);const te=()=>{C(null),f(null),m({subjectId:"",departmentId:"",leaderId:"",type:"",feedbackDate:"",scorePersonal:"",scoreManagement:"",result:"",description:"",participants:[]}),_(!0)},K=a=>{C(a.id),f(null),m({subjectId:a.subject_user_id||"",departmentId:a.department_id||"",leaderId:a.leader_id||"",type:a.feedback_type||"",feedbackDate:a.feedback_date||"",scorePersonal:a.score_personal!=null?String(a.score_personal):"",scoreManagement:a.score_management!=null?String(a.score_management):"",result:a.result||"",description:a.description||"",participants:(a.participants||[]).map(t=>t.clinic_user_id)}),_(!0)},se=async a=>{if(a.preventDefault(),!l){f("Nenhuma clínica ativa para salvar feedback.");return}if(!s.subjectId){f("Selecione quem recebe o feedback.");return}if(!s.feedbackDate){f("Informe a data do feedback.");return}const t=Array.from(new Set([...s.participants,s.subjectId,s.leaderId,b?.id].filter(Boolean)));A(!0),f(null);try{const x={clinic_id:l,subject_user_id:s.subjectId,department_id:s.departmentId||null,leader_id:s.leaderId||null,feedback_type:s.type||null,feedback_date:s.feedbackDate,score_personal:s.scorePersonal?Number(s.scorePersonal):null,score_management:s.scoreManagement?Number(s.scoreManagement):null,result:s.result||null,description:s.description||null};let g=w;if(w){const{error:c}=await h.from("hr_feedbacks").update(x).eq("id",w);if(c)throw c}else{const{data:c,error:n}=await h.from("hr_feedbacks").insert({...x,created_by:p?.id||null}).select("id").maybeSingle();if(n)throw n;g=c?.id||null}if(g&&(await h.from("hr_feedback_participants").delete().eq("feedback_id",g),t.length)){const c=t.map(j=>({feedback_id:g,clinic_user_id:j})),{error:n}=await h.from("hr_feedback_participants").insert(c);if(n)throw n}_(!1),C(null),m({subjectId:"",departmentId:"",leaderId:"",type:"",feedbackDate:"",scorePersonal:"",scoreManagement:"",result:"",description:"",participants:[]}),R()}catch(x){f(x?.message||"Erro ao salvar feedback.")}finally{A(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-brand-600 font-semibold",children:"Recursos Humanos"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Feedback"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Registre avaliações individuais e planos de ação."})]}),e.jsxs("button",{type:"button",onClick:te,className:"px-4 py-2 rounded-lg bg-brand-600 text-white text-sm hover:bg-brand-700 flex items-center gap-2",children:[e.jsx(oe,{size:16})," Novo feedback"]})]}),e.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl p-5 space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("select",{value:d.departmentId,onChange:a=>N(t=>({...t,departmentId:a.target.value})),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm bg-white min-w-[180px]",children:[e.jsx("option",{value:"",children:"Departamento"}),H.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),e.jsxs("select",{value:d.leaderId,onChange:a=>N(t=>({...t,leaderId:a.target.value})),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm bg-white min-w-[180px]",children:[e.jsx("option",{value:"",children:"Líder"}),u.map(a=>e.jsx("option",{value:a.id,children:a.name||a.email},a.id))]}),e.jsxs("select",{value:d.type,onChange:a=>N(t=>({...t,type:a.target.value})),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm bg-white min-w-[180px]",children:[e.jsx("option",{value:"",children:"Tipo de feedback"}),G.map(a=>e.jsx("option",{value:a,children:a},a))]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{size:16,className:"text-gray-400"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"date",value:d.dateStart,onChange:a=>N(t=>({...t,dateStart:a.target.value})),className:"px-2 py-1 border border-gray-200 rounded-lg text-sm"}),e.jsx("span",{className:"text-xs text-gray-400",children:"até"}),e.jsx("input",{type:"date",value:d.dateEnd,onChange:a=>N(t=>({...t,dateEnd:a.target.value})),className:"px-2 py-1 border border-gray-200 rounded-lg text-sm"})]})]}),e.jsxs("div",{className:"relative flex-1 min-w-[240px]",children:[e.jsx(me,{size:16,className:"absolute left-3 top-3 text-gray-400"}),e.jsx("input",{value:d.search,onChange:a=>N(t=>({...t,search:a.target.value})),placeholder:"Buscar por colaboradores",className:"w-full pl-9 pr-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-brand-500 outline-none"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>O("pdf"),className:"px-3 py-2 text-sm bg-white border border-gray-200 rounded-lg flex items-center gap-2",children:[e.jsx(Y,{size:14})," PDF"]}),e.jsxs("button",{type:"button",onClick:()=>O("csv"),className:"px-3 py-2 text-sm bg-white border border-gray-200 rounded-lg flex items-center gap-2",children:[e.jsx(Y,{size:14})," CSV"]})]})]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Somente as pessoas registradas podem visualizar o feedback."})]}),e.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-800",children:"Histórico de feedbacks"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(ie,{size:16}),M.length," registros"]})]}),F?e.jsx("div",{className:"px-6 py-12 text-center text-sm text-gray-500",children:"Carregando feedbacks..."}):e.jsxs("div",{className:"divide-y divide-gray-100",children:[e.jsx("div",{className:"px-6 py-3 border-b border-gray-100 bg-gray-50 text-[11px] font-semibold text-gray-500 uppercase tracking-wide",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx("div",{className:"w-10",children:"#"}),e.jsx("div",{className:"min-w-[200px]",children:"Colaborador"}),e.jsx("div",{className:"min-w-[160px]",children:"Data"}),e.jsx("div",{className:"min-w-[160px]",children:"Tipo"}),e.jsx("div",{className:"min-w-[160px]",children:"Resultado"}),e.jsx("div",{className:"min-w-[80px] text-center",children:"Nota"}),e.jsx("div",{className:"ml-auto",children:"Ações"})]})}),M.map((a,t)=>e.jsxs("div",{className:"px-6 py-4 flex flex-wrap items-center gap-4 hover:bg-gray-50",children:[e.jsxs("div",{className:"w-10 text-sm text-gray-400",children:["#",String(t+1).padStart(2,"0")]}),e.jsxs("div",{className:"flex items-center gap-3 min-w-[200px]",children:[a.subject?.avatar_url?e.jsx("img",{src:a.subject.avatar_url,alt:a.subject.name,className:"w-9 h-9 rounded-full object-cover"}):e.jsx("div",{className:"w-9 h-9 rounded-full bg-brand-50 text-brand-600 flex items-center justify-center text-xs font-semibold",children:J(a.subject?.name||a.subject?.email||"CL")}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:a.subject?.name||a.subject?.email}),e.jsx("p",{className:"text-xs text-gray-500",children:a.department?.name||"Sem departamento"})]})]}),e.jsx("div",{className:"min-w-[160px] text-sm text-gray-700",children:$(a.feedback_date)}),e.jsx("div",{className:"min-w-[160px] text-sm text-gray-700",children:a.feedback_type||"Não informado"}),e.jsx("div",{className:"min-w-[160px] text-sm text-gray-500",children:a.result||"Não informado"}),e.jsx("div",{className:"min-w-[80px] flex justify-center",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${be(a.score_management??a.score_personal)}`,children:a.score_management??a.score_personal??"--"})}),e.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>S(a),className:"w-9 h-9 rounded-full border border-gray-200 text-gray-500 hover:text-gray-700 hover:border-gray-300 flex items-center justify-center","aria-label":"Ver",title:"Ver",children:e.jsx(xe,{size:16})}),V(a)&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>K(a),className:"w-9 h-9 rounded-full border border-brand-100 text-brand-600 hover:border-brand-200 flex items-center justify-center","aria-label":"Editar",title:"Editar",children:e.jsx(pe,{size:16})}),e.jsx("button",{type:"button",onClick:async()=>{if(!confirm("Excluir feedback?"))return;const{error:x}=await h.from("hr_feedbacks").delete().eq("id",a.id);x||R()},className:"w-9 h-9 rounded-full border border-rose-100 text-rose-600 hover:border-rose-200 flex items-center justify-center","aria-label":"Apagar",title:"Apagar",children:e.jsx(ue,{size:16})})]})]})]},a.id)),M.length===0&&e.jsx("div",{className:"px-6 py-12 text-center text-sm text-gray-400",children:"Nenhum feedback encontrado."})]})]}),T&&e.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-start justify-center overflow-y-auto p-4 sm:p-6",onClick:W.onBackdropClick,children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-2xl p-6 space-y-4 max-h-[calc(100vh-2rem)] overflow-y-auto",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:w?"Editar feedback":"Novo feedback"}),e.jsx("button",{type:"button",onClick:()=>{_(!1),C(null)},className:"w-9 h-9 rounded-full bg-gray-100 flex items-center justify-center text-gray-500",children:"✕"})]}),e.jsxs("form",{onSubmit:se,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quem recebe o feedback?"}),e.jsxs("select",{value:s.subjectId,onChange:a=>m(t=>({...t,subjectId:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-white",children:[e.jsx("option",{value:"",children:"Selecione o colaborador"}),u.map(a=>e.jsx("option",{value:a.id,children:a.name||a.email},a.id))]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Departamento"}),e.jsxs("select",{value:s.departmentId,onChange:a=>m(t=>({...t,departmentId:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-white",children:[e.jsx("option",{value:"",children:"Selecione"}),H.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),e.jsxs("select",{value:s.type,onChange:a=>m(t=>({...t,type:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-white",children:[e.jsx("option",{value:"",children:"Selecione"}),G.map(a=>e.jsx("option",{value:a,children:a},a))]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Líder"}),e.jsxs("select",{value:s.leaderId,onChange:a=>m(t=>({...t,leaderId:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-white",children:[e.jsx("option",{value:"",children:"Selecione"}),u.map(a=>e.jsx("option",{value:a.id,children:a.name||a.email},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data"}),e.jsx("input",{type:"date",value:s.feedbackDate,onChange:a=>m(t=>({...t,feedbackDate:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nota pessoal"}),e.jsx("input",{type:"number",min:"0",max:"10",value:s.scorePersonal,onChange:a=>m(t=>({...t,scorePersonal:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nota da gestão"}),e.jsx("input",{type:"number",min:"0",max:"10",value:s.scoreManagement,onChange:a=>m(t=>({...t,scoreManagement:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Resultado"}),e.jsx("input",{value:s.result,onChange:a=>m(t=>({...t,result:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Não informado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrição do feedback/Plano de ação"}),e.jsx(ce,{value:s.description,onChange:a=>m(t=>({...t,description:a})),placeholder:"Descreva o feedback e o plano de ação",minHeight:140})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Participantes"}),e.jsx(ge,{options:Z,value:s.participants,onChange:a=>m(t=>({...t,participants:a})),placeholder:"Selecione os participantes"}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Somente participantes poderão visualizar o feedback."})]}),q&&e.jsx("div",{className:"p-3 bg-rose-50 text-rose-600 text-sm rounded-lg",children:q}),e.jsx("button",{type:"submit",disabled:U,className:"w-full px-4 py-2 bg-brand-600 text-white rounded-lg hover:bg-brand-700 disabled:opacity-50",children:U?"Salvando...":w?"Editar feedback":"Criar feedback"})]})]})}),o&&e.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-start justify-center overflow-y-auto p-4 sm:p-6",onClick:X.onBackdropClick,children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-3xl p-6 space-y-4 max-h-[calc(100vh-2rem)] overflow-y-auto",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Feedback"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:o.subject?.name||"Colaborador"})]}),e.jsx("button",{type:"button",onClick:()=>S(null),className:"w-9 h-9 rounded-full bg-gray-100 flex items-center justify-center text-gray-500",children:"✕"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"rounded-xl border border-gray-100 p-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Departamento"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:o.department?.name||"Não informado"})]}),e.jsxs("div",{className:"rounded-xl border border-gray-100 p-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Tipo"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:o.feedback_type||"Não informado"})]}),e.jsxs("div",{className:"rounded-xl border border-gray-100 p-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Data"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:$(o.feedback_date)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"rounded-xl border border-gray-100 p-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Nota pessoal"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:o.score_personal??"--"})]}),e.jsxs("div",{className:"rounded-xl border border-gray-100 p-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Nota da gestão"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:o.score_management??"--"})]})]}),e.jsxs("div",{className:"rounded-xl border border-gray-100 p-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Descrição / Plano de ação"}),o.description?e.jsx("div",{className:"text-sm text-gray-700 rte-content",dangerouslySetInnerHTML:{__html:o.description}}):e.jsx("p",{className:"text-sm text-gray-700",children:"Sem descrição."})]}),e.jsxs("div",{className:"rounded-xl border border-gray-100 p-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Participantes"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[(o.participants||[]).map(a=>e.jsx("span",{className:"px-3 py-1 text-xs rounded-full bg-gray-100 text-gray-600",children:a.clinic_users?.name||a.clinic_users?.email||"Participante"},a.clinic_user_id)),(o.participants||[]).length===0&&e.jsx("span",{className:"text-xs text-gray-400",children:"Nenhum participante informado."})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>S(null),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg",children:"Fechar"}),V(o)&&e.jsx("button",{type:"button",onClick:()=>{S(null),K(o)},className:"px-4 py-2 bg-brand-600 text-white rounded-lg",children:"Editar feedback"})]})]})})]})};export{Se as default};
